"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./prerender-manifest.json"),t=require("./manifest.json"),r=require("./routes-manifest.json"),n=require("stream"),o=require("zlib"),i=require("http"),a=require("perf_hooks"),s=require("buffer"),u=require("util"),c=require("crypto"),f=require("url"),l=require("https"),d=require("fs"),p=require("os"),h=require("path"),v=require("child_process");require("http2");var g=require("process");function y(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=y(e),b=y(t),w=y(r),S=y(n),E=y(o),x=y(i),C=y(s),A=y(u),T=y(c),L=y(f),O=y(l),k=y(g);const j={"accept-encoding":!0,"content-length":!0,"if-modified-since":!0,"if-none-match":!0,"if-range":!0,"if-unmodified-since":!0,"transfer-encoding":!0,via:!0},P={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy"},R={enableHTTPCompression:!1},N=(e,{enableHTTPCompression:t,rewrittenUri:r}=R)=>{const{request:n,response:o={headers:{}}}=e,i={headers:{}},a=new S.default.Readable,s=Object.assign(a,x.default.IncomingMessage.prototype);s.url=r||n.uri,s.method=n.method,s.rawHeaders=[],s.headers={},s.connection={},n.querystring&&(s.url=s.url+"?"+n.querystring);const u=n.headers||{};for(const e of Object.keys(u)){const t=u[e];t.forEach((e=>{s.rawHeaders.push(e.key),s.rawHeaders.push(e.value)})),s.headers[e]=t[0].value}s.getHeader=e=>s.headers[e.toLowerCase()],s.getHeaders=()=>s.headers,n.body&&n.body.data&&s.push(n.body.data,n.body.encoding?"base64":void 0),s.push(null);const c=new S.default;c.finished=!1,Object.defineProperty(c,"statusCode",{get:()=>i.status,set(e){i.status=e,i.statusDescription=P[e]}}),c.headers={},c.writeHead=(e,t)=>(i.status=e,t&&(c.headers=Object.assign(c.headers,t)),c),c.write=e=>{i.body||(i.body=Buffer.from("")),i.body=Buffer.concat([i.body,Buffer.isBuffer(e)?e:Buffer.from(e)])};let f=t&&(e=>{let t=!1;const r=e["accept-encoding"];if(r)for(let e=0;e<r.length;e++){const{value:n}=r[e];-1!==n.split(",").map((e=>e.split(";")[0].trim())).indexOf("gzip")&&(t=!0)}return t})(u);const l=new Promise((e=>{c.end=t=>{!0!==c.finished&&(c.finished=!0,t&&c.write(t),c.statusCode||(c.statusCode=200),i.body&&(i.bodyEncoding="base64",i.body=f?E.default.gzipSync(i.body).toString("base64"):Buffer.from(i.body).toString("base64")),i.headers=((e,t)=>{const r={},n={};return Object.entries(t).forEach((([e,t])=>{n[e.toLowerCase()]=t})),Object.keys(e).forEach((t=>{const o=t.toLowerCase(),i=e[t];j[o]?n[o]&&(r[o]=n[o]):(r[o]=[],i instanceof Array?i.forEach((e=>{r[o].push({key:t,value:e.toString()})})):r[o].push({key:t,value:i.toString()}))})),r})(c.headers,o.headers),f&&(i.headers["content-encoding"]=[{key:"Content-Encoding",value:"gzip"}]),e(i))}}));return c.setHeader=(e,t)=>{c.headers[e.toLowerCase()]=t},c.removeHeader=e=>{delete c.headers[e.toLowerCase()]},c.getHeader=e=>c.headers[e.toLowerCase()],c.getHeaders=()=>c.headers,c.hasHeader=e=>!!c.getHeader(e),{req:s,res:c,responsePromise:l}};N.SPECIAL_NODE_HEADERS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];var _=N;function I(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var o=1,i="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--o){s++;break}}else if("("===e[s]&&(o++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at "+s);i+=e[s++]}else i+=e[s++]+e[s++];if(o)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=s}else{for(var a="",s=r+1;s<e.length;){var u=e.charCodeAt(s);if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,o=void 0===n?"./":n,i="[^"+z(t.delimiter||"/#?")+"]+?",a=[],s=0,u=0,c="",f=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},l=function(e){var t=f(e);if(void 0!==t)return t;var n=r[u],o=n.type,i=n.index;throw new TypeError("Unexpected "+o+" at "+i+", expected "+e)},d=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var p=f("CHAR"),h=f("NAME"),v=f("PATTERN");if(h||v){var g=p||"";-1===o.indexOf(g)&&(c+=g,g=""),c&&(a.push(c),c=""),a.push({name:h||s++,prefix:g,suffix:"",pattern:v||i,modifier:f("MODIFIER")||""})}else{var y=p||f("ESCAPED_CHAR");if(y)c+=y;else if(c&&(a.push(c),c=""),f("OPEN")){g=d();var m=f("NAME")||"",b=f("PATTERN")||"",w=d();l("CLOSE"),a.push({name:m||(b?s++:""),pattern:m&&!b?i:b,prefix:g,suffix:w,modifier:f("MODIFIER")||""})}else l("END")}}return a}function M(e,t){return function(e,t){void 0===t&&(t={});var r=q(t),n=t.encode,o=void 0===n?function(e){return e}:n,i=t.validate,a=void 0===i||i,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var u=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,f="*"===i.modifier||"+"===i.modifier;if(Array.isArray(u)){if(!f)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===u.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var l=0;l<u.length;l++){var d=o(u[l],i);if(a&&!s[n].test(d))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');r+=i.prefix+d+i.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!c){var p=f?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+p)}}else{d=o(String(u),i);if(a&&!s[n].test(d))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');r+=i.prefix+d+i.suffix}}else r+=i}return r}}(I(e,t),t)}function D(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,o=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],a=n.index,s=Object.create(null),u=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?s[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return o(e,r)})):s[r.name]=o(n[e],r)},c=1;c<n.length;c++)u(c);return{path:i,index:a,params:s}}}(U(e,r,t),r,t)}function z(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function q(e){return e&&e.sensitive?"":"i"}function B(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,i=r.start,a=void 0===i||i,s=r.end,u=void 0===s||s,c=r.encode,f=void 0===c?function(e){return e}:c,l="["+z(r.endsWith||"")+"]|$",d="["+z(r.delimiter||"/#?")+"]",p=a?"^":"",h=0,v=e;h<v.length;h++){var g=v[h];if("string"==typeof g)p+=z(f(g));else{var y=z(f(g.prefix)),m=z(f(g.suffix));if(g.pattern)if(t&&t.push(g),y||m)if("+"===g.modifier||"*"===g.modifier){var b="*"===g.modifier?"?":"";p+="(?:"+y+"((?:"+g.pattern+")(?:"+m+y+"(?:"+g.pattern+"))*)"+m+")"+b}else p+="(?:"+y+"("+g.pattern+")"+m+")"+g.modifier;else p+="("+g.pattern+")"+g.modifier;else p+="(?:"+y+m+")"+g.modifier}}if(u)o||(p+=d+"?"),p+=r.endsWith?"(?="+l+")":"$";else{var w=e[e.length-1],S="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;o||(p+="(?:"+d+"(?="+l+"))?"),S||(p+="(?="+d+"|"+l+")")}return new RegExp(p,q(r))}(I(e,r),t,r)}function U(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return U(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",q(r))}(e,t,r):B(e,t,r)}function $(e,t){return D(t,{decode:decodeURIComponent})(e)}function K(e,t){try{const r=e.toLowerCase();if(r.startsWith("https://")||r.startsWith("http://")){const{origin:r,pathname:n}=new URL(e),o=`${r}${M(n,{encode:encodeURIComponent})(t)}`;return!e.endsWith("/")&&o.endsWith("/")?o.slice(0,-1):o}{const r=e.replace(/\?/g,"\\?");return M(r,{encode:encodeURIComponent})(t)}}catch(t){return console.error(`Could not compile destination ${e}, returning null instead. Error: ${t}`),null}}function F(e,t){if(t.i18n){const r=t.i18n.defaultLocale,n=t.i18n.locales,o=t.basePath;for(const r of n)if(e===`${t.basePath}/${r}`||e.startsWith(`${t.basePath}/${r}/`))return e;return"/"===e||e===""+o?`${o}/${r}`:e.replace(o+"/",`${o}/${r}/`)}return e}function H(e,t){if(t.i18n)for(const r of t.i18n.locales)if(e==="/"+r||e.startsWith(`/${r}/`))return!0;return!1}function V(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var W=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}},G=V((function(e,t){e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:W(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}})),J=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new G(t)}};const X={};var Z=function(e,t,r){if(!1===t||null==t)return e;"string"==typeof(r=r||{})&&(r={separator:r});const n=Array.isArray(t);J(!n||!r.separator,"Separator option no valid for array-based chain");const o=n?t:t.split(r.separator||".");let i=e;for(let e=0;e<o.length;++e){let n=o[e];const a=r.iterables&&X.iterables(i);if(Array.isArray(i)||"set"===a){const e=Number(n);Number.isInteger(e)&&(n=e<0?i.length+e:e)}if(!i||"function"==typeof i&&!1===r.functions||!a&&void 0===i[n]){J(!r.strict||e+1===o.length,"Missing segment",n,"in reach path ",t),J("object"==typeof i||!0===r.functions||"function"!=typeof i,"Invalid segment",n,"in reach path ",t),i=r.default;break}i=a?"set"===a?[...i][n]:i.get(n):i[n]}return i};X.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0};var Y=V((function(e,t){const r={};t=e.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},r.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(Buffer&&e instanceof Buffer)return t.buffer;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const n=Object.prototype.toString.call(e);return r.typeMap.get(n)||t.generic}})),Q=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)};const ee={needsProtoHack:new Set([Y.set,Y.map,Y.weakSet,Y.weakMap])};var te=ee.clone=function(e,t={},r=null){if("object"!=typeof e||null===e)return e;let n=ee.clone,o=r;if(t.shallow){if(!0!==t.shallow)return ee.cloneWithShallow(e,t);n=e=>e}else if(o){const t=o.get(e);if(t)return t}else o=new Map;const i=Y.getInternalProto(e);if(i===Y.buffer)return Buffer&&Buffer.from(e);if(i===Y.date)return new Date(e.getTime());if(i===Y.regex)return new RegExp(e);const a=ee.base(e,i,t);if(a===e)return e;if(o&&o.set(e,a),i===Y.set)for(const r of e)a.add(n(r,t,o));else if(i===Y.map)for(const[r,i]of e)a.set(r,n(i,t,o));const s=Q(e,t);for(const r of s){if("__proto__"===r)continue;if(i===Y.array&&"length"===r){a.length=e.length;continue}const s=Object.getOwnPropertyDescriptor(e,r);s?s.get||s.set?Object.defineProperty(a,r,s):s.enumerable?a[r]=n(e[r],t,o):Object.defineProperty(a,r,{enumerable:!1,writable:!0,configurable:!0,value:n(e[r],t,o)}):Object.defineProperty(a,r,{enumerable:!0,writable:!0,configurable:!0,value:n(e[r],t,o)})}return a};ee.cloneWithShallow=function(e,t){const r=t.shallow;(t=Object.assign({},t)).shallow=!1;const n=new Map;for(const t of r){const r=Z(e,t);"object"!=typeof r&&"function"!=typeof r||n.set(r,r)}return ee.clone(e,t,n)},ee.base=function(e,t,r){if(!1===r.prototype)return ee.needsProtoHack.has(t)?new t.constructor:t===Y.array?[]:{};const n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===Y.array){const e=[];return n!==t&&Object.setPrototypeOf(e,n),e}if(ee.needsProtoHack.has(t)){const e=new n.constructor;return n!==t&&Object.setPrototypeOf(e,n),e}return Object.create(n)};const re={};var ne=re.merge=function(e,t,r){if(J(e&&"object"==typeof e,"Invalid target value: must be an object"),J(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(r=Object.assign({nullOverride:!0,mergeArrays:!0},r),Array.isArray(t)){J(Array.isArray(e),"Cannot merge array onto an object"),r.mergeArrays||(e.length=0);for(let n=0;n<t.length;++n)e.push(te(t[n],{symbols:r.symbols}));return e}const n=Q(t,r);for(let o=0;o<n.length;++o){const i=n[o];if("__proto__"===i||!Object.prototype.propertyIsEnumerable.call(t,i))continue;const a=t[i];if(a&&"object"==typeof a){if(e[i]===a)continue;!e[i]||"object"!=typeof e[i]||Array.isArray(e[i])!==Array.isArray(a)||a instanceof Date||Buffer&&Buffer.isBuffer(a)||a instanceof RegExp?e[i]=te(a,{symbols:r.symbols}):re.merge(e[i],a,r)}else(null!=a||r.nullOverride)&&(e[i]=a)}return e};const oe={};oe.applyToDefaultsWithShallow=function(e,t,r){const n=r.shallow;J(Array.isArray(n),"Invalid keys");const o=new Map,i=!0===t?null:new Set;for(let r of n){r=Array.isArray(r)?r:r.split(".");const n=Z(e,r);n&&"object"==typeof n?o.set(n,i&&Z(t,r)||n):i&&i.add(r)}const a=te(e,{},o);if(!i)return a;for(const e of i)oe.reachCopy(a,t,e);return ne(a,t,{mergeArrays:!1,nullOverride:!1})},oe.reachCopy=function(e,t,r){for(const e of r){if(!(e in t))return;t=t[e]}const n=t;let o=e;for(let e=0;e<r.length-1;++e){const t=r[e];"object"!=typeof o[t]&&(o[t]={}),o=o[t]}o[r[r.length-1]]=n};const ie={};var ae=ie.Bench=class{constructor(){this.ts=0,this.reset()}reset(){this.ts=ie.Bench.now()}elapsed(){return ie.Bench.now()-this.ts}static now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},se=function(){};const ue={mismatched:null};var ce=function(e,t,r){return r=Object.assign({prototype:!0},r),!!ue.isDeepEqual(e,t,r,[])};ue.isDeepEqual=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;const o=typeof e;if(o!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===o){if(!r.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==o)return e!=e&&t!=t;const i=ue.getSharedType(e,t,!!r.prototype);switch(i){case Y.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case Y.promise:return e===t;case Y.regex:return e.toString()===t.toString();case ue.mismatched:return!1}for(let r=n.length-1;r>=0;--r)if(n[r].isSame(e,t))return!0;n.push(new ue.SeenEntry(e,t));try{return!!ue.isDeepEqualObj(i,e,t,r,n)}finally{n.pop()}},ue.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?ue.mismatched:Y.getInternalProto(e);const n=Y.getInternalProto(e);return n!==Y.getInternalProto(t)?ue.mismatched:n},ue.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},ue.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},ue.isSetSimpleEqual=function(e,t){for(const r of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,r))return!1;return!0},ue.isDeepEqualObj=function(e,t,r,n,o){const{isDeepEqual:i,valueOf:a,hasOwnEnumerableProperty:s}=ue,{keys:u,getOwnPropertySymbols:c}=Object;if(e===Y.array){if(!n.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!i(t[e],r[e],n,o))return!1;return!0}for(const e of t)for(const t of r)if(i(e,t,n,o))return!0}else if(e===Y.set){if(t.size!==r.size)return!1;if(!ue.isSetSimpleEqual(t,r)){const e=new Set(Set.prototype.values.call(r));for(const r of Set.prototype.values.call(t)){if(e.delete(r))continue;let t=!1;for(const a of e)if(i(r,a,n,o)){e.delete(a),t=!0;break}if(!t)return!1}}}else if(e===Y.map){if(t.size!==r.size)return!1;for(const[e,a]of Map.prototype.entries.call(t)){if(void 0===a&&!Map.prototype.has.call(r,e))return!1;if(!i(a,Map.prototype.get.call(r,e),n,o))return!1}}else if(e===Y.error&&(t.name!==r.name||t.message!==r.message))return!1;const f=a(t),l=a(r);if((t!==f||r!==l)&&!i(f,l,n,o))return!1;const d=u(t);if(!n.part&&d.length!==u(r).length&&!n.skip)return!1;let p=0;for(const e of d)if(n.skip&&n.skip.includes(e))void 0===r[e]&&++p;else{if(!s(r,e))return!1;if(!i(t[e],r[e],n,o))return!1}if(!n.part&&d.length-p!==u(r).length)return!1;if(!1!==n.symbols){const e=c(t),a=new Set(c(r));for(const u of e){if(!n.skip||!n.skip.includes(u))if(s(t,u)){if(!s(r,u))return!1;if(!i(t[u],r[u],n,o))return!1}else if(s(r,u))return!1;a.delete(u)}for(const e of a)if(s(r,e))return!1}return!0},ue.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}};var fe=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")};const le={};le.array=function(e,t,r){if(Array.isArray(t)||(t=[t]),!e.length)return!1;if(r.only&&r.once&&e.length!==t.length)return!1;let n;const o=new Map;for(const e of t)if(r.deep&&e&&"object"==typeof e){n=n||le.compare(r);let t=!1;for(const[r,i]of o.entries())if(n(r,e)){++i.allowed,t=!0;break}t||o.set(e,{allowed:1,hits:0})}else{const t=o.get(e);t?++t.allowed:o.set(e,{allowed:1,hits:0})}let i=0;for(const t of e){let e;if(r.deep&&t&&"object"==typeof t){n=n||le.compare(r);for(const[r,i]of o.entries())if(n(r,t)){e=i;break}}else e=o.get(t);if(e&&(++e.hits,++i,r.once&&e.hits>e.allowed))return!1}if(r.only&&i!==e.length)return!1;for(const e of o.values())if(e.hits!==e.allowed&&e.hits<e.allowed&&!r.part)return!1;return!!i},le.object=function(e,t,r){J(void 0===r.once,"Cannot use option once with object");const n=Q(e,r);if(!n.length)return!1;if(Array.isArray(t))return le.array(n,t,r);const o=Object.getOwnPropertySymbols(t).filter((e=>t.propertyIsEnumerable(e))),i=[...Object.keys(t),...o],a=le.compare(r),s=new Set(i);for(const o of n)if(s.has(o)){if(!a(t[o],e[o]))return!1;s.delete(o)}else if(r.only)return!1;return!s.size||!!r.part&&s.size<i.length},le.string=function(e,t,r){if(""===e)return 1===t.length&&""===t[0]||!r.once&&!t.some((e=>""!==e));const n=new Map,o=[];for(const e of t)if(J("string"==typeof e,"Cannot compare string reference to non-string value"),e){const t=n.get(e);t?++t.allowed:(n.set(e,{allowed:1,hits:0}),o.push(fe(e)))}else if(r.once||r.only)return!1;if(!o.length)return!0;const i=new RegExp(`(${o.join("|")})`,"g"),a=e.replace(i,((e,t)=>(++n.get(t).hits,"")));if(r.only&&a)return!1;let s=!1;for(const e of n.values())if(e.hits&&(s=!0),e.hits!==e.allowed){if(e.hits<e.allowed&&!r.part)return!1;if(r.once)return!1}return!!s},le.compare=function(e){if(!e.deep)return le.shallow;const t=void 0!==e.only,r=void 0!==e.part,n={prototype:t?e.only:!!r&&!e.part,part:t?!e.only:!!r&&e.part};return(e,t)=>ce(e,t,n)},le.shallow=function(e,t){return e===t};const de={};de.escapeHtmlChar=function(e){const t=de.namedHtml[e];if(void 0!==t)return t;if(e>=256)return"&#"+e+";";return`&#x${e.toString(16).padStart(2,"0")};`},de.isSafe=function(e){return void 0!==de.safeCharCodes[e]},de.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},de.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}();const pe={};var he=pe.flatten=function(e,t){const r=t||[];for(let t=0;t<e.length;++t)Array.isArray(e[t])?pe.flatten(e[t],r):r.push(e[t]);return r};const ve={};ve.has=function(e,t){return"function"==typeof e.has?e.has(t):void 0!==e[t]};var ge={applyToDefaults:function(e,t,r={}){if(J(e&&"object"==typeof e,"Invalid defaults value: must be an object"),J(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),J("object"==typeof r,"Invalid options: must be an object"),!t)return null;if(r.shallow)return oe.applyToDefaultsWithShallow(e,t,r);const n=te(e);if(!0===t)return n;const o=void 0!==r.nullOverride&&r.nullOverride;return ne(n,t,{nullOverride:o,mergeArrays:!1})},assert:J,Bench:ae,block:function(){return new Promise(se)},clone:te,contain:function(e,t,r={}){return"object"!=typeof t&&(t=[t]),J(!Array.isArray(t)||t.length,"Values array cannot be empty"),"string"==typeof e?le.string(e,t,r):Array.isArray(e)?le.array(e,t,r):(J("object"==typeof e,"Reference must be string or an object"),le.object(e,t,r))},deepEqual:ce,Error:G,escapeHeaderAttribute:function(e){return J(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},escapeHtml:function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);de.isSafe(n)?t+=e[r]:t+=de.escapeHtmlChar(n)}return t},escapeJson:function(e){if(!e)return"";let t;return e.replace(/[<>&\u2028\u2029]/g,(e=>(t=e.charCodeAt(0),60===t?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029")))},escapeRegex:fe,flatten:he,ignore:se,intersect:function(e,t,r={}){if(!e||!t)return r.first?null:[];const n=[],o=Array.isArray(e)?new Set(e):e,i=new Set;for(const e of t)if(ve.has(o,e)&&!i.has(e)){if(r.first)return e;n.push(e),i.add(e)}return r.first?null:n},isPromise:function(e){return!!e&&"function"==typeof e.then},merge:ne,once:function(e){if(e._hoekOnce)return e;let t=!1;const r=function(...r){t||(t=!0,e(...r))};return r._hoekOnce=!0,r},reach:Z,reachTemplate:function(e,t,r){return t.replace(/{([^}]+)}/g,((t,n)=>{const o=Z(e,n,r);return null==o?"":o}))},stringify:W,wait:function(e,t){if("number"!=typeof e&&void 0!==e)throw new TypeError("Timeout must be a number");return new Promise((r=>setTimeout(r,e,t)))}},ye=V((function(e,t){const r={codes:new Map([[100,"Continue"],[101,"Switching Protocols"],[102,"Processing"],[200,"OK"],[201,"Created"],[202,"Accepted"],[203,"Non-Authoritative Information"],[204,"No Content"],[205,"Reset Content"],[206,"Partial Content"],[207,"Multi-Status"],[300,"Multiple Choices"],[301,"Moved Permanently"],[302,"Moved Temporarily"],[303,"See Other"],[304,"Not Modified"],[305,"Use Proxy"],[307,"Temporary Redirect"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Time-out"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Request Entity Too Large"],[414,"Request-URI Too Large"],[415,"Unsupported Media Type"],[416,"Requested Range Not Satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Time-out"],[505,"HTTP Version Not Supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"]])};t.Boom=class extends Error{constructor(e,n={}){if(e instanceof Error)return t.boomify(ge.clone(e),n);const{statusCode:o=500,data:i=null,ctor:a=t.Boom}=n,s=new Error(e||void 0);Error.captureStackTrace(s,a),s.data=i;const u=r.initialize(s,o);return Object.defineProperty(u,"typeof",{value:a}),n.decorate&&Object.assign(u,n.decorate),u}static[Symbol.hasInstance](e){return t.isBoom(e)}},t.isBoom=function(e,t){return e instanceof Error&&!!e.isBoom&&(!t||e.output.statusCode===t)},t.boomify=function(e,t){return ge.assert(e instanceof Error,"Cannot wrap non-Error object"),void 0!==(t=t||{}).data&&(e.data=t.data),t.decorate&&Object.assign(e,t.decorate),e.isBoom?!1===t.override||!t.statusCode&&!t.message?e:r.initialize(e,t.statusCode||e.output.statusCode,t.message):r.initialize(e,t.statusCode||500,t.message)},t.badRequest=function(e,r){return new t.Boom(e,{statusCode:400,data:r,ctor:t.badRequest})},t.unauthorized=function(e,r,n){const o=new t.Boom(e,{statusCode:401,ctor:t.unauthorized});if(!r)return o;if("string"!=typeof r)return o.output.headers["WWW-Authenticate"]=r.join(", "),o;let i=""+r;return(n||e)&&(o.output.payload.attributes={}),n&&("string"==typeof n?(i+=" "+ge.escapeHeaderAttribute(n),o.output.payload.attributes=n):i+=" "+Object.keys(n).map((e=>{let t=n[e];return null==t&&(t=""),o.output.payload.attributes[e]=t,`${e}="${ge.escapeHeaderAttribute(t.toString())}"`})).join(", ")),e?(n&&(i+=","),i+=` error="${ge.escapeHeaderAttribute(e)}"`,o.output.payload.attributes.error=e):o.isMissing=!0,o.output.headers["WWW-Authenticate"]=i,o},t.paymentRequired=function(e,r){return new t.Boom(e,{statusCode:402,data:r,ctor:t.paymentRequired})},t.forbidden=function(e,r){return new t.Boom(e,{statusCode:403,data:r,ctor:t.forbidden})},t.notFound=function(e,r){return new t.Boom(e,{statusCode:404,data:r,ctor:t.notFound})},t.methodNotAllowed=function(e,r,n){const o=new t.Boom(e,{statusCode:405,data:r,ctor:t.methodNotAllowed});return"string"==typeof n&&(n=[n]),Array.isArray(n)&&(o.output.headers.Allow=n.join(", ")),o},t.notAcceptable=function(e,r){return new t.Boom(e,{statusCode:406,data:r,ctor:t.notAcceptable})},t.proxyAuthRequired=function(e,r){return new t.Boom(e,{statusCode:407,data:r,ctor:t.proxyAuthRequired})},t.clientTimeout=function(e,r){return new t.Boom(e,{statusCode:408,data:r,ctor:t.clientTimeout})},t.conflict=function(e,r){return new t.Boom(e,{statusCode:409,data:r,ctor:t.conflict})},t.resourceGone=function(e,r){return new t.Boom(e,{statusCode:410,data:r,ctor:t.resourceGone})},t.lengthRequired=function(e,r){return new t.Boom(e,{statusCode:411,data:r,ctor:t.lengthRequired})},t.preconditionFailed=function(e,r){return new t.Boom(e,{statusCode:412,data:r,ctor:t.preconditionFailed})},t.entityTooLarge=function(e,r){return new t.Boom(e,{statusCode:413,data:r,ctor:t.entityTooLarge})},t.uriTooLong=function(e,r){return new t.Boom(e,{statusCode:414,data:r,ctor:t.uriTooLong})},t.unsupportedMediaType=function(e,r){return new t.Boom(e,{statusCode:415,data:r,ctor:t.unsupportedMediaType})},t.rangeNotSatisfiable=function(e,r){return new t.Boom(e,{statusCode:416,data:r,ctor:t.rangeNotSatisfiable})},t.expectationFailed=function(e,r){return new t.Boom(e,{statusCode:417,data:r,ctor:t.expectationFailed})},t.teapot=function(e,r){return new t.Boom(e,{statusCode:418,data:r,ctor:t.teapot})},t.badData=function(e,r){return new t.Boom(e,{statusCode:422,data:r,ctor:t.badData})},t.locked=function(e,r){return new t.Boom(e,{statusCode:423,data:r,ctor:t.locked})},t.failedDependency=function(e,r){return new t.Boom(e,{statusCode:424,data:r,ctor:t.failedDependency})},t.tooEarly=function(e,r){return new t.Boom(e,{statusCode:425,data:r,ctor:t.tooEarly})},t.preconditionRequired=function(e,r){return new t.Boom(e,{statusCode:428,data:r,ctor:t.preconditionRequired})},t.tooManyRequests=function(e,r){return new t.Boom(e,{statusCode:429,data:r,ctor:t.tooManyRequests})},t.illegal=function(e,r){return new t.Boom(e,{statusCode:451,data:r,ctor:t.illegal})},t.internal=function(e,n,o=500){return r.serverError(e,n,o,t.internal)},t.notImplemented=function(e,n){return r.serverError(e,n,501,t.notImplemented)},t.badGateway=function(e,n){return r.serverError(e,n,502,t.badGateway)},t.serverUnavailable=function(e,n){return r.serverError(e,n,503,t.serverUnavailable)},t.gatewayTimeout=function(e,n){return r.serverError(e,n,504,t.gatewayTimeout)},t.badImplementation=function(e,n){const o=r.serverError(e,n,500,t.badImplementation);return o.isDeveloperError=!0,o},r.initialize=function(e,t,n){const o=parseInt(t,10);if(ge.assert(!isNaN(o)&&o>=400,"First argument must be a number (400+):",t),e.isBoom=!0,e.isServer=o>=500,e.hasOwnProperty("data")||(e.data=null),e.output={statusCode:o,payload:{},headers:{}},Object.defineProperty(e,"reformat",{value:r.reformat}),n||e.message||(e.reformat(),n=e.output.payload.error),n){const t=Object.getOwnPropertyDescriptor(e,"message")||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"message");ge.assert(!t||t.configurable&&!t.get,"The error is not compatible with boom"),e.message=n+(e.message?": "+e.message:""),e.output.payload.message=e.message}return e.reformat(),e},r.reformat=function(e=!1){this.output.payload.statusCode=this.output.statusCode,this.output.payload.error=r.codes.get(this.output.statusCode)||"Unknown",500===this.output.statusCode&&!0!==e?this.output.payload.message="An internal server error occurred":this.message&&(this.output.payload.message=this.message)},r.serverError=function(e,r,n,o){return r instanceof Error&&!r.isBoom?t.boomify(r,{statusCode:n,message:e}):new t.Boom(e,{statusCode:n,data:r,ctor:o})}})),me=V((function(e,t){const r={};t.selection=function(e,r,n){const o=t.selections(e,r,n);return o.length?o[0]:""},t.selections=function(e,t,n){return ge.assert(!t||Array.isArray(t),"Preferences must be an array"),r.parse(e||"",t,n)},r.parse=function(e,t,n){const o=e.replace(/[ \t]/g,""),i=new Map;if(t)for(let e=0;e<t.length;++e){const r=t[e];i.set(r.toLowerCase(),{orig:r,pos:e})}const a=o.split(","),s=[],u=new Set;for(let e=0;e<a.length;++e){const r=a[e];if(!r)continue;const o=r.split(";");if(o.length>2)throw ye.badRequest(`Invalid ${n.type} header`);let c=o[0].toLowerCase();if(!c)throw ye.badRequest(`Invalid ${n.type} header`);n.equivalents&&n.equivalents.has(c)&&(c=n.equivalents.get(c));const f={token:c,pos:e,q:1,specificity:n.specificity?c.split("-"):null};if(t&&i.has(c)&&(f.pref=i.get(c).pos),u.add(f.token),2===o.length){const e=o[1],[t,r]=e.split("=");if(!r||"q"!==t&&"Q"!==t)throw ye.badRequest(`Invalid ${n.type} header`);const i=parseFloat(r);if(0===i)continue;Number.isFinite(i)&&i<=1&&i>=.001&&(f.q=i)}s.push(f)}s.sort(r.sort);const c=s.map((e=>e.token));if(n.default&&!u.has(n.default)&&c.push(n.default),!t||!t.length)return c;const f=[];for(const e of c)if("*"===e)for(const[e,t]of i)u.has(e)||f.push(t.orig);else{const t=e.toLowerCase();i.has(t)&&f.push(i.get(t).orig)}return f},r.sort=function(e,t){return t.q!==e.q?t.q-e.q:t.pref!==e.pref?void 0===e.pref?1:void 0===t.pref?-1:e.pref-t.pref:e.specificity&&e.specificity[0]===t.specificity[0]&&e.specificity.length!==t.specificity.length?t.specificity.length-e.specificity.length:e.pos-t.pos}})),be=V((function(e,t){const r={};t.selection=function(e,r){const n=t.selections(e,r);return n.length?n[0]:""},t.selections=function(e,t){return ge.assert(!t||Array.isArray(t),"Preferences must be an array"),r.parse(e,t)},r.validMediaRx=/^(?:\*\/\*)|(?:[\w\!#\$%&'\*\+\-\.\^`\|~]+\/\*)|(?:[\w\!#\$%&'\*\+\-\.\^`\|~]+\/[\w\!#\$%&'\*\+\-\.\^`\|~]+)$/,r.parse=function(e,t){const{header:n,quoted:o}=r.normalize(e),i=n.split(","),a=[],s={};for(let e=0;e<i.length;++e){const t=i[e];if(!t)continue;const n=t.split(";"),u=n.shift().toLowerCase();if(!r.validMediaRx.test(u))continue;const c={token:u,params:{},exts:{},pos:e};let f="params";for(const e of n){const t=e.split("=");if(2!==t.length||!t[1])throw ye.badRequest("Invalid accept header");const r=t[0];let n=t[1];"q"===r||"Q"===r?(f="exts",n=parseFloat(n),(!Number.isFinite(n)||n>1||n<.001&&0!==n)&&(n=1),c.q=n):('"'===n[0]&&(n=`"${o[n]}"`),c[f][t[0]]=n)}const l=Object.keys(c.params);c.original=[""].concat(l.map((e=>`${e}=${c.params[e]}`))).join(";"),c.specificity=l.length,void 0===c.q&&(c.q=1);const d=c.token.split("/");c.type=d[0],c.subtype=d[1],s[c.token]=c,c.q&&a.push(c)}return a.sort(r.sort),r.preferences(s,a,t)},r.normalize=function(e){const t={header:e=e||"*/*",quoted:{}};if(e.includes('"')){let r=0;t.header=e.replace(/="([^"]*)"/g,((e,n)=>{const o='"'+ ++r;return t.quoted[o]=n,"="+o}))}return t.header=t.header.replace(/[ \t]/g,""),t},r.sort=function(e,t){return t.q!==e.q?t.q-e.q:e.type!==t.type?r.innerSort(e,t,"type"):e.subtype!==t.subtype?r.innerSort(e,t,"subtype"):e.specificity!==t.specificity?t.specificity-e.specificity:e.pos-t.pos},r.innerSort=function(e,t,r){return"*"===e[r]?1:"*"===t[r]||e[r]<t[r]?-1:1},r.preferences=function(e,t,r){if(!r||!r.length)return t.map((e=>e.token+e.original));const n=Object.create(null),o=Object.create(null);let i=!1;for(const e of r){const t=e.toLowerCase();o[t]=e;const r=t.split("/"),a=r[0],s=r[1];"*"!==a?(n[a]=n[a]||Object.create(null),n[a][s]=e):(ge.assert("*"===s,"Invalid media type preference contains wildcard type with a subtype"),i=!0)}const a=[];for(const r of t){const t=r.token,{type:s,subtype:u}=e[t],c=n[s];if("*"!==s)if(i)a.push((o[t]||t)+r.original);else if("*"===u){if(c)for(const t of Object.keys(c))e[`${s}/${t}`]||a.push(c[t])}else{const e=o[t];(e||c&&c["*"])&&a.push((e||t)+r.original)}else{for(const t of Object.keys(o))e[t]||a.push(o[t]);i&&a.push("*/*")}}return a}})),we=V((function(e,t){const r={options:{charset:{type:"accept-charset"},encoding:{type:"accept-encoding",default:"identity",equivalents:new Map([["x-compress","compress"],["x-gzip","gzip"]])},language:{type:"accept-language",specificity:!0}}};for(const e in r.options)t[e]=(t,n)=>me.selection(t,n,r.options[e]),t[e+"s"]=(t,n)=>me.selections(t,n,r.options[e]);t.mediaType=(e,t)=>be.selection(e,t),t.mediaTypes=(e,t)=>be.selections(e,t),t.parseAll=function(e){return{charsets:t.charsets(e["accept-charset"]),encodings:t.encodings(e["accept-encoding"]),languages:t.languages(e["accept-language"]),mediaTypes:t.mediaTypes(e.accept)}}}));function Se(e,t,r){let n;if(t){const[r,o]=e.split("?");n=`${r}?${t}${o?"&"+o:""}`}else n=e;const o=r.toString();return{status:o,statusDescription:i.STATUS_CODES[o],headers:{location:[{key:"Location",value:n}],refresh:308===r?[{key:"Refresh",value:"0;url="+n}]:[]}}}const Ee=["connection","expect","keep-alive","proxy-authenticate","proxy-authorization","proxy-connection","trailer","upgrade","x-accel-buffering","x-accel-charset","x-accel-limit-rate","x-accel-redirect","x-cache","x-forwarded-proto","x-real-ip","content-length","host","transfer-encoding","via"],xe=["x-amz-cf-","x-amzn-","x-edge-"];function Ce(e){const t=e.toLowerCase();for(const e of xe)if(t.startsWith(e))return!0;return Ee.includes(t)}var Ae=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},o=e.split(ke),i=n.decode||Le,a=0;a<o.length;a++){var s=o[a],u=s.indexOf("=");if(!(u<0)){var c=s.substr(0,u).trim(),f=s.substr(++u,s.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==r[c]&&(r[c]=Pe(f,i))}}return r},Te=function(e,t,r){var n=r||{},o=n.encode||Oe;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!je.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!je.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(null!=n.maxAge){var s=n.maxAge-0;if(isNaN(s)||!isFinite(s))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(s)}if(n.domain){if(!je.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!je.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(a+="; HttpOnly");n.secure&&(a+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},Le=decodeURIComponent,Oe=encodeURIComponent,ke=/; */,je=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Pe(e,t){try{return t(e)}catch(t){return e}}var Re={parse:Ae,serialize:Te},Ne=V((function(e,t){var r=C.default.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=C.default:(n(C.default,t),t.Buffer=o),o.prototype=Object.create(r.prototype),n(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=r(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return C.default.SlowBuffer(e)}})),_e=Ne.Buffer;function Ie(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=_e.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=_e.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}A.default.inherits(Ie,S.default),Ie.prototype.write=function(e){this.buffer=_e.concat([this.buffer,_e.from(e)]),this.emit("data",e)},Ie.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};var Me=Ie,De=C.default.Buffer,ze=C.default.SlowBuffer,qe=Be;function Be(e,t){if(!De.isBuffer(e)||!De.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}Be.install=function(){De.prototype.equal=ze.prototype.equal=function(e){return Be(this,e)}};var Ue=De.prototype.equal,$e=ze.prototype.equal;function Ke(e){return(e/8|0)+(e%8==0?0:1)}Be.restore=function(){De.prototype.equal=Ue,ze.prototype.equal=$e};var Fe={ES256:Ke(256),ES384:Ke(384),ES512:Ke(521)};var He=function(e){var t=Fe[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')},Ve=Ne.Buffer;function We(e){if(Ve.isBuffer(e))return e;if("string"==typeof e)return Ve.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Ge(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}var Je={derToJose:function(e,t){e=We(e);var r=He(t),n=r+1,o=e.length,i=0;if(48!==e[i++])throw new Error('Could not find expected "seq"');var a=e[i++];if(129===a&&(a=e[i++]),o-i<a)throw new Error('"seq" specified length of "'+a+'", only "'+(o-i)+'" remaining');if(2!==e[i++])throw new Error('Could not find expected "int" for "r"');var s=e[i++];if(o-i-2<s)throw new Error('"r" specified length of "'+s+'", only "'+(o-i-2)+'" available');if(n<s)throw new Error('"r" specified length of "'+s+'", max of "'+n+'" is acceptable');var u=i;if(i+=s,2!==e[i++])throw new Error('Could not find expected "int" for "s"');var c=e[i++];if(o-i!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(o-i)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var f=i;if((i+=c)!==o)throw new Error('Expected to consume entire buffer, but "'+(o-i)+'" bytes remain');var l=r-s,d=r-c,p=Ve.allocUnsafe(l+s+d+c);for(i=0;i<l;++i)p[i]=0;e.copy(p,i,u+Math.max(-l,0),u+s);for(var h=i=r;i<h+d;++i)p[i]=0;return e.copy(p,i,f+Math.max(-d,0),f+c),p=(p=p.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=We(e);var r=He(t),n=e.length;if(n!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+n+'"');var o=Ge(e,0,r),i=Ge(e,r,e.length),a=r-o,s=r-i,u=2+a+1+1+s,c=u<128,f=Ve.allocUnsafe((c?2:3)+u),l=0;return f[l++]=48,c?f[l++]=u:(f[l++]=129,f[l++]=255&u),f[l++]=2,f[l++]=a,o<0?(f[l++]=0,l+=e.copy(f,l,0,r)):l+=e.copy(f,l,o,r),f[l++]=2,f[l++]=s,i<0?(f[l++]=0,e.copy(f,l,r)):e.copy(f,l,r+i),f}},Xe=Ne.Buffer,Ze="secret must be a string or buffer",Ye="key must be a string or a buffer",Qe="function"==typeof T.default.createPublicKey;function et(e){if(!Xe.isBuffer(e)&&"string"!=typeof e){if(!Qe)throw ot(Ye);if("object"!=typeof e)throw ot(Ye);if("string"!=typeof e.type)throw ot(Ye);if("string"!=typeof e.asymmetricKeyType)throw ot(Ye);if("function"!=typeof e.export)throw ot(Ye)}}function tt(e){if(!Xe.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw ot("key must be a string, a buffer or an object")}function rt(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nt(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function ot(e){var t=[].slice.call(arguments,1),r=A.default.format.bind(A.default,e).apply(null,t);return new TypeError(r)}function it(e){var t;return t=e,Xe.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function at(e){return function(t,r){!function(e){if(!Xe.isBuffer(e)){if("string"==typeof e)return e;if(!Qe)throw ot(Ze);if("object"!=typeof e)throw ot(Ze);if("secret"!==e.type)throw ot(Ze);if("function"!=typeof e.export)throw ot(Ze)}}(r),t=it(t);var n=T.default.createHmac("sha"+e,r);return rt((n.update(t),n.digest("base64")))}}function st(e){return function(t,r,n){var o=at(e)(t,n);return qe(Xe.from(r),Xe.from(o))}}function ut(e){return function(t,r){tt(r),t=it(t);var n=T.default.createSign("RSA-SHA"+e);return rt((n.update(t),n.sign(r,"base64")))}}function ct(e){return function(t,r,n){et(n),t=it(t),r=nt(r);var o=T.default.createVerify("RSA-SHA"+e);return o.update(t),o.verify(n,r,"base64")}}function ft(e){return function(t,r){tt(r),t=it(t);var n=T.default.createSign("RSA-SHA"+e);return rt((n.update(t),n.sign({key:r,padding:T.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:T.default.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function lt(e){return function(t,r,n){et(n),t=it(t),r=nt(r);var o=T.default.createVerify("RSA-SHA"+e);return o.update(t),o.verify({key:n,padding:T.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:T.default.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function dt(e){var t=ut(e);return function(){var r=t.apply(null,arguments);return r=Je.derToJose(r,"ES"+e)}}function pt(e){var t=ct(e);return function(r,n,o){return n=Je.joseToDer(n,"ES"+e).toString("base64"),t(r,n,o)}}function ht(){return function(){return""}}function vt(){return function(e,t){return""===t}}Qe&&(Ye+=" or a KeyObject",Ze+="or a KeyObject");var gt=function(e){var t={hs:at,rs:ut,ps:ft,es:dt,none:ht},r={hs:st,rs:ct,ps:lt,es:pt,none:vt},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw ot('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var o=(n[1]||n[3]).toLowerCase(),i=n[2];return{sign:t[o](i),verify:r[o](i)}},yt=C.default.Buffer,mt=function(e){return"string"==typeof e?e:"number"==typeof e||yt.isBuffer(e)?e.toString():JSON.stringify(e)},bt=Ne.Buffer;function wt(e,t){return bt.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function St(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,o=e.encoding,i=gt(t.alg),a=function(e,t,r){r=r||"utf8";var n=wt(mt(e),"binary"),o=wt(mt(t),r);return A.default.format("%s.%s",n,o)}(t,r,o),s=i.sign(a,n);return A.default.format("%s.%s",a,s)}function Et(e){var t=e.secret||e.privateKey||e.key,r=new Me(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new Me(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}A.default.inherits(Et,S.default),Et.prototype.sign=function(){try{var e=St({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},Et.sign=St;var xt=Et,Ct=Ne.Buffer,At=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Tt(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function Lt(e){var t=e.split(".",1)[0];return Tt(Ct.from(t,"base64").toString("binary"))}function Ot(e){return e.split(".")[2]}function kt(e){return At.test(e)&&!!Lt(e)}function jt(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var o=Ot(e=mt(e)),i=function(e){return e.split(".",2).join(".")}(e);return gt(t).verify(i,o,r)}function Pt(e,t){if(t=t||{},!kt(e=mt(e)))return null;var r=Lt(e);if(!r)return null;var n=function(e,t){t=t||"utf8";var r=e.split(".")[1];return Ct.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(n=JSON.parse(n,t.encoding)),{header:r,payload:n,signature:Ot(e)}}function Rt(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new Me(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new Me(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}A.default.inherits(Rt,S.default),Rt.prototype.verify=function(){try{var e=jt(this.signature.buffer,this.algorithm,this.key.buffer),t=Pt(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},Rt.decode=Pt,Rt.isValid=kt,Rt.verify=jt;var Nt=Rt,_t={ALGORITHMS:["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],sign:xt.sign,verify:Nt.verify,decode:Nt.decode,isValid:Nt.isValid,createSign:function(e){return new xt(e)},createVerify:function(e){return new Nt(e)}},It=function(e,t){t=t||{};var r=_t.decode(e,t);if(!r)return null;var n=r.payload;if("string"==typeof n)try{var o=JSON.parse(n);null!==o&&"object"==typeof o&&(n=o)}catch(e){}return!0===t.complete?{header:r.header,payload:n,signature:r.signature}:n},Mt=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(Mt.prototype=Object.create(Error.prototype)).constructor=Mt;var Dt=Mt,zt=function(e,t){Dt.call(this,e),this.name="NotBeforeError",this.date=t};(zt.prototype=Object.create(Dt.prototype)).constructor=zt;var qt=zt,Bt=function(e,t){Dt.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(Bt.prototype=Object.create(Dt.prototype)).constructor=Bt;var Ut=Bt,$t=1e3,Kt=60*$t,Ft=60*Kt,Ht=24*Ft,Vt=7*Ht,Wt=365.25*Ht,Gt=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*Wt;case"weeks":case"week":case"w":return r*Vt;case"days":case"day":case"d":return r*Ht;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ft;case"minutes":case"minute":case"mins":case"min":case"m":return r*Kt;case"seconds":case"second":case"secs":case"sec":case"s":return r*$t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=Ht)return Jt(e,t,Ht,"day");if(t>=Ft)return Jt(e,t,Ft,"hour");if(t>=Kt)return Jt(e,t,Kt,"minute");if(t>=$t)return Jt(e,t,$t,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=Ht)return Math.round(e/Ht)+"d";if(t>=Ft)return Math.round(e/Ft)+"h";if(t>=Kt)return Math.round(e/Kt)+"m";if(t>=$t)return Math.round(e/$t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Jt(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}var Xt=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var n=Gt(e);if(void 0===n)return;return Math.floor(r+n/1e3)}return"number"==typeof e?r+e:void 0},Zt=V((function(e,t){var r;t=e.exports=V,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],i=t.src=[],a=0,s=a++;i[s]="0|[1-9]\\d*";var u=a++;i[u]="[0-9]+";var c=a++;i[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;i[f]="("+i[s]+")\\.("+i[s]+")\\.("+i[s]+")";var l=a++;i[l]="("+i[u]+")\\.("+i[u]+")\\.("+i[u]+")";var d=a++;i[d]="(?:"+i[s]+"|"+i[c]+")";var p=a++;i[p]="(?:"+i[u]+"|"+i[c]+")";var h=a++;i[h]="(?:-("+i[d]+"(?:\\."+i[d]+")*))";var v=a++;i[v]="(?:-?("+i[p]+"(?:\\."+i[p]+")*))";var g=a++;i[g]="[0-9A-Za-z-]+";var y=a++;i[y]="(?:\\+("+i[g]+"(?:\\."+i[g]+")*))";var m=a++,b="v?"+i[f]+i[h]+"?"+i[y]+"?";i[m]="^"+b+"$";var w="[v=\\s]*"+i[l]+i[v]+"?"+i[y]+"?",S=a++;i[S]="^"+w+"$";var E=a++;i[E]="((?:<|>)?=?)";var x=a++;i[x]=i[u]+"|x|X|\\*";var C=a++;i[C]=i[s]+"|x|X|\\*";var A=a++;i[A]="[v=\\s]*("+i[C]+")(?:\\.("+i[C]+")(?:\\.("+i[C]+")(?:"+i[h]+")?"+i[y]+"?)?)?";var T=a++;i[T]="[v=\\s]*("+i[x]+")(?:\\.("+i[x]+")(?:\\.("+i[x]+")(?:"+i[v]+")?"+i[y]+"?)?)?";var L=a++;i[L]="^"+i[E]+"\\s*"+i[A]+"$";var O=a++;i[O]="^"+i[E]+"\\s*"+i[T]+"$";var k=a++;i[k]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var j=a++;i[j]="(?:~>?)";var P=a++;i[P]="(\\s*)"+i[j]+"\\s+",o[P]=new RegExp(i[P],"g");var R=a++;i[R]="^"+i[j]+i[A]+"$";var N=a++;i[N]="^"+i[j]+i[T]+"$";var _=a++;i[_]="(?:\\^)";var I=a++;i[I]="(\\s*)"+i[_]+"\\s+",o[I]=new RegExp(i[I],"g");var M=a++;i[M]="^"+i[_]+i[A]+"$";var D=a++;i[D]="^"+i[_]+i[T]+"$";var z=a++;i[z]="^"+i[E]+"\\s*("+w+")$|^$";var q=a++;i[q]="^"+i[E]+"\\s*("+b+")$|^$";var B=a++;i[B]="(\\s*)"+i[E]+"\\s*("+w+"|"+i[A]+")",o[B]=new RegExp(i[B],"g");var U=a++;i[U]="^\\s*("+i[A]+")\\s+-\\s+("+i[A]+")\\s*$";var $=a++;i[$]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var K=a++;i[K]="(<|>)?=?\\s*\\*";for(var F=0;F<35;F++)r(F,i[F]),o[F]||(o[F]=new RegExp(i[F]));function H(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[S]:o[m]).test(e))return null;try{return new V(e,t)}catch(e){return null}}function V(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof V))return new V(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[S]:o[m]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=H,t.valid=function(e,t){var r=H(e,t);return r?r.version:null},t.clean=function(e,t){var r=H(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=V,V.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},V.prototype.toString=function(){return this.version},V.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof V||(e=new V(e,this.options)),this.compareMain(e)||this.comparePre(e)},V.prototype.compareMain=function(e){return e instanceof V||(e=new V(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},V.prototype.comparePre=function(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return G(n,o)}while(++t)},V.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new V(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var r=H(e),n=H(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return o+a;return i},t.compareIdentifiers=G;var W=/^[0-9]+$/;function G(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new V(e,r).compare(new V(t,r))}function X(e,t,r){return J(e,t,r)>0}function Z(e,t,r){return J(e,t,r)<0}function Y(e,t,r){return 0===J(e,t,r)}function Q(e,t,r){return 0!==J(e,t,r)}function ee(e,t,r){return J(e,t,r)>=0}function te(e,t,r){return J(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Y(e,r,n);case"!=":return Q(e,r,n);case">":return X(e,r,n);case">=":return ee(e,r,n);case"<":return Z(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new V(e,t).major},t.minor=function(e,t){return new V(e,t).minor},t.patch=function(e,t){return new V(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,r){return J(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=X,t.lt=Z,t.eq=Y,t.neq=Q,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var oe={};function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof ne)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function se(e,t,r,n,o,i,a,s,u,c,f,l,d){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(s=ae(u)?"":ae(c)?"<"+(+u+1)+".0.0":ae(f)?"<"+u+"."+(+c+1)+".0":l?"<="+u+"."+c+"."+f+"-"+l:"<="+s)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==oe&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){try{t=new ie(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var o,i,a,s,u;switch(e=new V(e,n),t=new ie(t,n),r){case">":o=X,i=te,a=Z,s=">",u=">=";break;case"<":o=Z,i=ee,a=X,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var f=t.set[c],l=null,d=null;if(f.forEach((function(e){e.semver===oe&&(e=new ne(">=0.0.0")),l=l||e,d=d||e,o(e.semver,l.semver,n)?l=e:a(e.semver,d.semver,n)&&(d=e)})),l.operator===s||l.operator===u)return!1;if((!d.operator||d.operator===s)&&i(e,d.semver))return!1;if(d.operator===u&&a(e,d.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?o[z]:o[q],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new V(r[2],this.options.loose):this.semver=oe},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new V(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new ie(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new ie(this.value,t),ce(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&a||s||u},t.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[$]:o[U];e=e.replace(n,se),r("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),r("comparator trim",e,o[B]),e=(e=(e=e.replace(o[P],"$1~")).replace(o[I],"$1^")).split(/\s+/).join(" ");var i=t?o[z]:o[q],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[D]:o[M];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[N]:o[R];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[O]:o[L];return e.replace(n,(function(t,n,o,i,a,s){r("xRange",e,t,n,o,i,a,s);var u=ae(o),c=u||ae(i),f=c||ae(a);return"="===n&&f&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&f?(c&&(i=0),a=0,">"===n?(n=">=",c?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",c?o=+o+1:i=+i+1),t=n+o+"."+i+"."+a):c?t=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[K],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(i)}))),a=a.map((function(e){return new ne(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new V(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new V(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new V(n=e,r)))})),n},t.minVersion=function(e,t){e=new ie(e,t);var r=new V("0.0.0");if(e.test(r))return r;if(r=new V("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new V(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!X(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,t.prerelease=function(e,t){var r=H(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ie(e,r),t=new ie(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof V)return e;if("string"!=typeof e)return null;var t=e.match(o[k]);if(null==t)return null;return H(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})).satisfies(process.version,"^6.12.0 || >=8.0.0"),Yt=["RS256","RS384","RS512","ES256","ES384","ES512"],Qt=["RS256","RS384","RS512"],er=["HS256","HS384","HS512"];Zt&&(Yt.splice(3,0,"PS256","PS384","PS512"),Qt.splice(3,0,"PS256","PS384","PS512"));var tr=17976931348623157e292,rr="[object GeneratorFunction]",nr=/^\s+|\s+$/g,or=/^[-+]0x[0-9a-f]+$/i,ir=/^0b[01]+$/i,ar=/^0o[0-7]+$/i,sr=/^(?:0|[1-9]\d*)$/,ur=parseInt;function cr(e){return e!=e}function fr(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,(function(t){return e[t]}))}var lr,dr,pr=Object.prototype,hr=pr.hasOwnProperty,vr=pr.toString,gr=pr.propertyIsEnumerable,yr=(lr=Object.keys,dr=Object,function(e){return lr(dr(e))}),mr=Math.max;function br(e,t){var r=Er(e)||function(e){return function(e){return Ar(e)&&xr(e)}(e)&&hr.call(e,"callee")&&(!gr.call(e,"callee")||"[object Arguments]"==vr.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!hr.call(e,i)||o&&("length"==i||Sr(i,n))||r.push(i);return r}function wr(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||pr,t!==n)return yr(e);var t,r,n,o=[];for(var i in Object(e))hr.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Sr(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||sr.test(e))&&e>-1&&e%1==0&&e<t}var Er=Array.isArray;function xr(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=Cr(e)?vr.call(e):"";return"[object Function]"==t||t==rr}(e)}function Cr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ar(e){return!!e&&"object"==typeof e}var Tr=function(e,t,r,n){var o;e=xr(e)?e:(o=e)?fr(o,function(e){return xr(e)?br(e):wr(e)}(o)):[],r=r&&!n?function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||Ar(e)&&"[object Symbol]"==vr.call(e)}(e))return NaN;if(Cr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Cr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(nr,"");var r=ir.test(e);return r||ar.test(e)?ur(e.slice(2),r?2:8):or.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*tr}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(r):0;var i=e.length;return r<0&&(r=mr(i+r,0)),function(e){return"string"==typeof e||!Er(e)&&Ar(e)&&"[object String]"==vr.call(e)}(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&function(e,t,r){if(t!=t)return function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,cr,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r)>-1},Lr=Object.prototype.toString;var Or=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==Lr.call(e)},kr=17976931348623157e292,jr=/^\s+|\s+$/g,Pr=/^[-+]0x[0-9a-f]+$/i,Rr=/^0b[01]+$/i,Nr=/^0o[0-7]+$/i,_r=parseInt,Ir=Object.prototype.toString;function Mr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var Dr=function(e){return"number"==typeof e&&e==function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Ir.call(e)}(e))return NaN;if(Mr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Mr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jr,"");var r=Rr.test(e);return r||Nr.test(e)?_r(e.slice(2),r?2:8):Pr.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*kr}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(e)};Object.prototype.toString;var zr=Function.prototype,qr=Object.prototype,Br=zr.toString,Ur=qr.hasOwnProperty,$r=Br.call(Object),Kr=qr.toString,Fr=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);var Hr=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Kr.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Fr(e);if(null===t)return!0;var r=Ur.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Br.call(r)==$r},Vr=Object.prototype.toString,Wr=Array.isArray;var Gr=function(e){return"string"==typeof e||!Wr(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==Vr.call(e)};parseInt,Object.prototype.toString;var Jr=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];Zt&&Jr.splice(3,0,"PS256","PS384","PS512");Tr.bind(null,Jr);var Xr=function(e,t,r,n){var o;if("function"!=typeof r||n||(n=r,r={}),r||(r={}),r=Object.assign({},r),o=n||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return o(new Dt("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return o(new Dt("nonce must be a non-empty string"));var i=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return o(new Dt("jwt must be provided"));if("string"!=typeof e)return o(new Dt("jwt must be a string"));var a,s=e.split(".");if(3!==s.length)return o(new Dt("jwt malformed"));try{a=It(e,{complete:!0})}catch(e){return o(e)}if(!a)return o(new Dt("invalid token"));var u,c=a.header;if("function"==typeof t){if(!n)return o(new Dt("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(e,r){return r(null,t)};return u(c,(function(t,n){if(t)return o(new Dt("error in secret or public key callback: "+t.message));var u,f=""!==s[2].trim();if(!f&&n)return o(new Dt("jwt signature is required"));if(f&&!n)return o(new Dt("secret or public key must be provided"));if(f||r.algorithms||(r.algorithms=["none"]),r.algorithms||(r.algorithms=~n.toString().indexOf("BEGIN CERTIFICATE")||~n.toString().indexOf("BEGIN PUBLIC KEY")?Yt:~n.toString().indexOf("BEGIN RSA PUBLIC KEY")?Qt:er),!~r.algorithms.indexOf(a.header.alg))return o(new Dt("invalid algorithm"));try{u=_t.verify(e,a.header.alg,n)}catch(e){return o(e)}if(!u)return o(new Dt("invalid signature"));var l=a.payload;if(void 0!==l.nbf&&!r.ignoreNotBefore){if("number"!=typeof l.nbf)return o(new Dt("invalid nbf value"));if(l.nbf>i+(r.clockTolerance||0))return o(new qt("jwt not active",new Date(1e3*l.nbf)))}if(void 0!==l.exp&&!r.ignoreExpiration){if("number"!=typeof l.exp)return o(new Dt("invalid exp value"));if(i>=l.exp+(r.clockTolerance||0))return o(new Ut("jwt expired",new Date(1e3*l.exp)))}if(r.audience){var d=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(l.aud)?l.aud:[l.aud]).some((function(e){return d.some((function(t){return t instanceof RegExp?t.test(e):t===e}))})))return o(new Dt("jwt audience invalid. expected: "+d.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&l.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(l.iss)))return o(new Dt("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&l.sub!==r.subject)return o(new Dt("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&l.jti!==r.jwtid)return o(new Dt("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&l.nonce!==r.nonce)return o(new Dt("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof l.iat)return o(new Dt("iat required when maxAge is specified"));var p=Xt(r.maxAge,l.iat);if(void 0===p)return o(new Dt('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=p+(r.clockTolerance||0))return o(new Ut("maxAge exceeded",new Date(1e3*p)))}if(!0===r.complete){var h=a.signature;return o(null,{header:c,payload:l,signature:h})}return o(null,l)}))};const Zr={__prerender_bypass:"",__next_preview_data:""},Yr=e=>(e||[]).reduce(((e,t)=>{const r=Re.parse(t.value);return Qr(r)?r:e}),Zr),Qr=e=>!(!e.__next_preview_data||!e.__prerender_bypass);const en=async()=>{const{defaultRetryDecider:e,StandardRetryStrategy:t}=await Promise.resolve().then((function(){return Wo}));return new t((async()=>3),{retryDecider:t=>"code"in t&&("ECONNRESET"===t.code||"EPIPE"===t.code||"ETIMEDOUT"===t.code)||e(t)})},tn=["connection","expect","keep-alive","proxy-authenticate","proxy-authorization","proxy-connection","trailer","upgrade","x-accel-buffering","x-accel-charset","x-accel-limit-rate","x-accel-redirect","x-cache","x-forwarded-proto","x-real-ip"],rn=["x-amz-cf-","x-amzn-","x-edge-"];function nn(e){const t=e.toLowerCase();for(const e of rn)if(t.startsWith(e))return!0;return tn.includes(t)}const on=w.default.basePath,an=e=>e?{now:()=>a.performance.now(),log:(e,t,r)=>{t&&r&&console.log(`${e}: ${r-t} (ms)`)}}:{now:()=>0,log:()=>{}},sn=(e,t)=>{e.headers.host=[{key:"host",value:t}]},un=e=>e.startsWith("/_next/data"),cn=(e,t)=>{var r,n;if(on){if(!e.startsWith(on))return(null===(r=t.i18n)||void 0===r?void 0:r.defaultLocale)?`/${null===(n=t.i18n)||void 0===n?void 0:n.defaultLocale}/404`:"/404";e=e.slice(on.length)}return e.endsWith("/")&&(e=e.slice(0,-1)),""===e?"/":e},fn=(e,t)=>{let r=e.replace("/_next/data/"+t.buildId,"").replace(".json","");return r=["/index",""].includes(r)?"/":r,r},ln=e=>{const{pages:{ssr:t,html:r}}=e,n={...t.dynamic,...r.dynamic};return o=>{let i=o;if(un(o)&&(i=fn(i,e)),t.nonDynamic[i])return t.nonDynamic[i];if(r.nonDynamic[i])return r.nonDynamic[i];for(const e in n){const{file:t,regex:r}=n[e];if(new RegExp(r,"i").test(i))return t}return void 0!==r.nonDynamic["/404"]?"pages/404.html":"pages/_error.js"}},dn=(e,t)=>{var r;const n=null===(r=t.i18n)||void 0===r?void 0:r.locales;if(n)for(const t of n){if(e.uri===`${on}/${t}`){e.uri="/",e.querystring+=`${""===e.querystring?"":"&"}nextInternalLocale=${t}`,delete e.headers["accept-language"];break}if(e.uri.startsWith(`${on}/${t}/`)){e.uri=e.uri.replace(`${on}/${t}/`,on+"/"),e.querystring+=`${""===e.querystring?"":"&"}nextInternalLocale=${t}`,delete e.headers["accept-language"];break}}},pn=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{var o,i;const a=e.Records[0].cf.request,s=a.headers.authorization,u=function(e,t){if(t&&t.username&&t.password&&e!=="Basic "+Buffer.from(t.username+":"+t.password).toString("base64"))return{status:"401",statusDescription:"Unauthorized",body:"Unauthorized",headers:{"www-authenticate":[{key:"WWW-Authenticate",value:"Basic"}]}};return null}(s?s[0].value:null,t.authentication);if(u)return u;const c=function(e,t){const r=e.headers.host;if(r&&r.length>0){const n=r[0].value,o=t.domainRedirects;if(o&&o[n])return`${o[n]}${e.uri}`}return null}(a,t);if(c)return Se(c,a.querystring,308);const f=n.basePath;let l=cn(a.uri,n);const d=decodeURI(l),{pages:p,publicFiles:h}=t;let v=h[d],g=un(l),y=a.uri;if(g||v)y.endsWith("/")&&(y=y.slice(0,-1));else if("/"!==a.uri&&""!==a.uri&&!l.endsWith("/404")){const e=t.trailingSlash;!e&&y.endsWith("/")&&(y=y.slice(0,-1)),e&&!y.endsWith("/")&&(y+="/")}if(y!==a.uri)return Se(y,a.querystring,308);const m=function(e,t){e=F(e,t);const r=t.redirects;for(const t of r){const r=$(e,t.source);if(r){const e=K(t.destination,r.params);return e?{redirectPath:e,statusCode:t.statusCode}:null}}return null}(a.uri,n);if(m)return Se(m.redirectPath,a.querystring,m.statusCode);const b=a.headers["accept-language"],w=function(e,t,r,n){if("/"===t&&e&&r.i18n){const t=r.i18n.locales,o=r.i18n.defaultLocale,i=r.basePath,a=we.language(e);let s=void 0;for(const e of t)if(a===e){s=e;break}return s&&s!==o?`${i}/${s}${n.trailingSlash?"/":""}`:void 0}}(b?b[0].value:void 0,l,n,t);if(w)return Se(w,a.querystring,307);const S=null===(o=n.i18n)||void 0===o?void 0:o.defaultLocale;!S||H(l,n)||v||g||(l="/"===l?"/"+S:`/${S}${l}`);let E;if(!(p.html.nonDynamic[l]||p.ssr.nonDynamic[l]||v)&&!g){const r=function(e,t,r,n){e=F(e,t);const o=t.rewrites;for(const i of o){const o=$(e,i.source);if(o){let a=K(i.destination,o.params);if(e===a){const e=r(n);if("pages/404.html"===e||"pages/_error.js"===e)continue}if(a&&H(e,t)){const e=Object.keys(o.params).filter((e=>"nextInternalLocale"!==e)).map((e=>{const t=o.params[e];return"string"==typeof t?`${e}=${t}`:t.map((t=>`${e}=${t}`)).join("&")})).filter((e=>e)).join("&");e&&(a+=a.includes("?")?"&"+e:"?"+e)}return a}}return null}(a.uri,n,ln(t),l);if(r){E=a.uri;const[o,s]=r.split("?");if(a.uri=o,a.querystring?a.querystring=`${a.querystring}${s?"&"+s:""}`:a.querystring=""+(null!=s?s:""),function(e){return e.startsWith("http://")||e.startsWith("https://")}(o)){const{req:r,res:n,responsePromise:s}=_(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression});return await async function(e,t,r,n){const{default:o}=await Promise.resolve().then((function(){return oo}));let i,a={};if(Object.assign(a,t.headers),a.hasOwnProperty("host")&&delete a.host,n){const r=Buffer.from(n,"base64").toString("utf8");i=await o(e,{headers:a,method:t.method,body:r,compress:!1})}else i=await o(e,{headers:a,method:t.method,compress:!1});for(const[e,t]of i.headers.entries())Ce(e)||r.setHeader(e,t);r.statusCode=i.status,r.end(await i.buffer())}(o+(a.querystring?"?":"")+a.querystring,r,n,null===(i=a.body)||void 0===i?void 0:i.data),await s}l=cn(a.uri,n),!S||H(l,n)||v||g||(l="/"===l?"/"+S:`/${S}${l}`)}}const x=p.html.nonDynamic[l],C=p.ssg.nonDynamic[l],A=a.origin.s3,T=x||C,L=(e=>{if("us-east-1"===e.region)return e.domainName;if(!e.domainName.includes(e.region))return e.domainName.replace("s3.amazonaws.com",`s3.${e.region}.amazonaws.com`);return e.domainName})(A),O=gn(l,t,n),{now:k,log:j}=an(t.logLambdaExecutionTimes),P=((e,t)=>{const r=Yr(e);if(Qr(r))try{return Xr(r.__next_preview_data,t),!0}catch(e){console.warn("Found preview headers without valid authentication token")}return!1})(a.headers.cookie,r.preview.previewModeSigningKey);A.domainName=L;e:if(v||x||T&&!P||O&&!P||g&&!P){if(v)A.path=f+"/public",f&&(a.uri=a.uri.replace(f,""));else if(T||O){A.path=`${f}/static-pages/${t.buildId}`;const e="/"===l?"/index":l;a.uri=e+".html"}else if(g){const e=fn(l,t),r=ln(t)(e);if("pages/404.html"===r)A.path=`${f}/static-pages/${t.buildId}`,a.uri=r.replace("pages","");else if("pages/_error.js"===r||!p.ssg.nonDynamic[e]&&!gn(e,t,n))break e}return sn(a,L),a}const R=ln(t)(l);if(R.endsWith(".html")&&!P)return A.path=`${f}/static-pages/${t.buildId}`,a.uri=R.replace("pages",""),sn(a,L),a;const N=k();let I=require("./"+R);j("require JS execution time",N,k());const M=k();dn(a,n);const{req:D,res:z,responsePromise:q}=_(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression,rewrittenUri:E});try{if("pages/_error.js"===R&&(z.statusCode=404),g){const{renderOpts:e}=await I.renderReqToHTML(D,z,"passthrough");z.setHeader("Content-Type","application/json"),z.end(JSON.stringify(e.pageData))}else await Promise.race([I.render(D,z),q])}catch(e){console.error(`Error rendering page: ${R}. Error:\n${e}\nRendering Next.js error page.`),z.statusCode=500,I=require("./pages/_error.js"),await I.render(D,z)}const B=await q;return j("SSR execution time",M,k()),yn(B,z),B},hn=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{var o,i;const a=e.Records[0].cf.response,s=e.Records[0].cf.request,{status:u}=a;if("403"!==u)return"/404.html"===s.uri&&(a.status="404",a.statusDescription="Not Found"),a;if("PUT"===s.method||"DELETE"===s.method)return a;const c=cn(s.uri,n),{domainName:f,region:l}=s.origin.s3,d=f.replace(`.s3.${l}.amazonaws.com`,""),{S3Client:p}=await Promise.resolve().then((function(){return Nd})),h=new p({region:null===(i=null===(o=s.origin)||void 0===o?void 0:o.s3)||void 0===i?void 0:i.region,maxAttempts:3,retryStrategy:await en()});let v;if(un(c)&&!(v=ln(t)(c)).endsWith(".html")){const r=require("./"+v),{req:n,res:o,responsePromise:i}=_(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression}),u=!!r.getStaticProps,{renderOpts:f,html:l}=await r.renderReqToHTML(n,o,"passthrough");if(u){const e={Bucket:d,Key:`${on}${""===on?"":"/"}${c.replace(/^\//,"")}`,Body:JSON.stringify(f.pageData),ContentType:"application/json",CacheControl:"public, max-age=0, s-maxage=2678400, must-revalidate"},r={Bucket:d,Key:`${on}${""===on?"":"/"}static-pages/${t.buildId}/${s.uri.replace(`/_next/data/${t.buildId}/`,"").replace(".json",".html")}`,Body:l,ContentType:"text/html",CacheControl:"public, max-age=0, s-maxage=2678400, must-revalidate"},{PutObjectCommand:n}=await Promise.resolve().then((function(){return Xp}));await Promise.all([h.send(new n(e)),h.send(new n(r))])}return o.writeHead(200,a.headers),o.setHeader("Content-Type","application/json"),o.end(JSON.stringify(f.pageData)),await i}{const e=gn(c,t,n);if(!e)return a;const r=`${on}${""===on?"":"/"}static-pages/${t.buildId}${e.fallback||"/404.html"}`,{GetObjectCommand:o}=await Promise.resolve().then((function(){return Zp})),i=await Promise.resolve().then((function(){return uh}));let s;const u={Bucket:d,Key:r},{Body:f,CacheControl:l}=await h.send(new o(u));return s=await i.default(f),{status:e.fallback?"200":"404",statusDescription:e.fallback?"OK":"Not Found",headers:{...a.headers,"content-type":[{key:"Content-Type",value:"text/html"}],"cache-control":[{key:"Cache-Control",value:null!=l?l:e.fallback?"public, max-age=0, s-maxage=0, must-revalidate":"public, max-age=0, s-maxage=2678400, must-revalidate"}]},body:s}}},vn=e=>"origin-response"===e.Records[0].cf.config.eventType,gn=(e,t,r)=>{const{pages:{ssr:n,html:o,ssg:i}}=t;if(n.nonDynamic[e]||o.nonDynamic[e])return!1;let a=void 0;return!Object.values({...n.dynamic,...o.dynamic}).find((t=>{if(a)return!1;if(new RegExp(t.regex).test(e)){return!Object.keys(i.dynamic).find((e=>{const n=t.file===`pages${function(e,t){if(t.i18n)for(const r of t.i18n.locales){if(e==="/"+r)return"/";if(e.startsWith(`/${r}/`))return e.replace("/"+r,"")}return e}(e,r)}.js`;return n&&(a=i.dynamic[e]),n}))}return!1}))&&(a||Object.values(i.dynamic).find((t=>new RegExp(t.routeRegex).test(e))))},yn=(e,t)=>{404==t.statusCode?(e.status="404",e.statusDescription="Not Found"):500==t.statusCode&&(e.status="500",e.statusDescription="Internal Server Error")},mn=S.default.Readable,bn=Symbol("buffer"),wn=Symbol("type");class Sn{constructor(){this[wn]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,o=Number(t.length);for(let e=0;e<o;e++){const o=t[e];let i;i=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof Sn?o[bn]:Buffer.from("string"==typeof o?o:String(o)),n+=i.length,r.push(i)}}this[bn]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[wn]=o)}get size(){return this[bn].length}get type(){return this[wn]}text(){return Promise.resolve(this[bn].toString())}arrayBuffer(){const e=this[bn],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new mn;return e._read=function(){},e.push(this[bn]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,o;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const i=Math.max(o-n,0),a=this[bn].slice(n,n+i),s=new Sn([],{type:arguments[2]});return s[bn]=a,s}}function En(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let xn;Object.defineProperties(Sn.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Sn.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),En.prototype=Object.create(Error.prototype),En.prototype.constructor=En,En.prototype.name="FetchError";try{xn=require("encoding").convert}catch(e){}const Cn=Symbol("Body internals"),An=S.default.PassThrough;function Tn(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size;let o=void 0===n?0:n;var i=r.timeout;let a=void 0===i?0:i;null==e?e=null:On(e)?e=Buffer.from(e.toString()):kn(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof S.default||(e=Buffer.from(String(e)))),this[Cn]={body:e,disturbed:!1,error:null},this.size=o,this.timeout=a,e instanceof S.default&&e.on("error",(function(e){const r="AbortError"===e.name?e:new En(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[Cn].error=r}))}function Ln(){var e=this;if(this[Cn].disturbed)return Tn.Promise.reject(new TypeError("body used already for: "+this.url));if(this[Cn].disturbed=!0,this[Cn].error)return Tn.Promise.reject(this[Cn].error);let t=this.body;if(null===t)return Tn.Promise.resolve(Buffer.alloc(0));if(kn(t)&&(t=t.stream()),Buffer.isBuffer(t))return Tn.Promise.resolve(t);if(!(t instanceof S.default))return Tn.Promise.resolve(Buffer.alloc(0));let r=[],n=0,o=!1;return new Tn.Promise((function(i,a){let s;e.timeout&&(s=setTimeout((function(){o=!0,a(new En(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(o=!0,a(t)):a(new En(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!o&&null!==t){if(e.size&&n+t.length>e.size)return o=!0,void a(new En(`content size at ${e.url} over limit: ${e.size}`,"max-size"));n+=t.length,r.push(t)}})),t.on("end",(function(){if(!o){clearTimeout(s);try{i(Buffer.concat(r,n))}catch(t){a(new En(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function On(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function kn(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function jn(e){let t,r,n=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof S.default&&"function"!=typeof n.getBoundary&&(t=new An,r=new An,n.pipe(t),n.pipe(r),e[Cn].body=t,n=r),n}function Pn(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":On(e)?"application/x-www-form-urlencoded;charset=UTF-8":kn(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof S.default?null:"text/plain;charset=UTF-8"}function Rn(e){const t=e.body;return null===t?0:kn(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}Tn.prototype={get body(){return this[Cn].body},get bodyUsed(){return this[Cn].disturbed},arrayBuffer(){return Ln.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return Ln.call(this).then((function(t){return Object.assign(new Sn([],{type:e.toLowerCase()}),{[bn]:t})}))},json(){var e=this;return Ln.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return Tn.Promise.reject(new En(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return Ln.call(this).then((function(e){return e.toString()}))},buffer(){return Ln.call(this)},textConverted(){var e=this;return Ln.call(this).then((function(t){return function(e,t){if("function"!=typeof xn)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,o,i="utf-8";r&&(n=/charset=([^;]*)/i.exec(r));o=e.slice(0,1024).toString(),!n&&o&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!n&&o&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),n||(n=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),n&&n.pop()),n&&(n=/charset=(.*)/i.exec(n.pop())));!n&&o&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));n&&(i=n.pop(),"gb2312"!==i&&"gbk"!==i||(i="gb18030"));return xn(e,"UTF-8",i).toString()}(t,e.headers)}))}},Object.defineProperties(Tn.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),Tn.mixIn=function(e){for(const t of Object.getOwnPropertyNames(Tn.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(Tn.prototype,t);Object.defineProperty(e,t,r)}},Tn.Promise=global.Promise;const Nn=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,_n=/[^\t\x20-\x7e\x80-\xff]/;function In(e){if(e=""+e,Nn.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function Mn(e){if(e=""+e,_n.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function Dn(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const zn=Symbol("map");class qn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[zn]=Object.create(null),e instanceof qn){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){In(e=""+e);const t=Dn(this[zn],e);return void 0===t?null:this[zn][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=Bn(this),n=0;for(;n<r.length;){var o=r[n];const i=o[0],a=o[1];e.call(t,a,i,this),r=Bn(this),n++}}set(e,t){t=""+t,In(e=""+e),Mn(t);const r=Dn(this[zn],e);this[zn][void 0!==r?r:e]=[t]}append(e,t){t=""+t,In(e=""+e),Mn(t);const r=Dn(this[zn],e);void 0!==r?this[zn][r].push(t):this[zn][e]=[t]}has(e){return In(e=""+e),void 0!==Dn(this[zn],e)}delete(e){In(e=""+e);const t=Dn(this[zn],e);void 0!==t&&delete this[zn][t]}raw(){return this[zn]}keys(){return $n(this,"key")}values(){return $n(this,"value")}[Symbol.iterator](){return $n(this,"key+value")}}function Bn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[zn]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[zn][t].join(", ")}:function(t){return[t.toLowerCase(),e[zn][t].join(", ")]})}qn.prototype.entries=qn.prototype[Symbol.iterator],Object.defineProperty(qn.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(qn.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const Un=Symbol("internal");function $n(e,t){const r=Object.create(Kn);return r[Un]={target:e,kind:t,index:0},r}const Kn=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==Kn)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[Un];const t=e.target,r=e.kind,n=e.index,o=Bn(t,r);return n>=o.length?{value:void 0,done:!0}:(this[Un].index=n+1,{value:o[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function Fn(e){const t=Object.assign({__proto__:null},e[zn]),r=Dn(e[zn],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(Kn,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const Hn=Symbol("Response internals"),Vn=x.default.STATUS_CODES;class Wn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Tn.call(this,e,t);const r=t.status||200,n=new qn(t.headers);if(null!=e&&!n.has("Content-Type")){const t=Pn(e);t&&n.append("Content-Type",t)}this[Hn]={url:t.url,status:r,statusText:t.statusText||Vn[r],headers:n,counter:t.counter}}get url(){return this[Hn].url||""}get status(){return this[Hn].status}get ok(){return this[Hn].status>=200&&this[Hn].status<300}get redirected(){return this[Hn].counter>0}get statusText(){return this[Hn].statusText}get headers(){return this[Hn].headers}clone(){return new Wn(jn(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Tn.mixIn(Wn.prototype),Object.defineProperties(Wn.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Wn.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const Gn=Symbol("Request internals"),Jn=L.default.parse,Xn=L.default.format,Zn="destroy"in S.default.Readable.prototype;function Yn(e){return"object"==typeof e&&"object"==typeof e[Gn]}class Qn{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Yn(e)?t=Jn(e.url):(t=e&&e.href?Jn(e.href):Jn(""+e),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||Yn(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=r.body?r.body:Yn(e)&&null!==e.body?jn(e):null;Tn.call(this,o,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const i=new qn(r.headers||e.headers||{});if(null!=o&&!i.has("Content-Type")){const e=Pn(o);e&&i.append("Content-Type",e)}let a=Yn(e)?e.signal:null;if("signal"in r&&(a=r.signal),null!=a&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Gn]={method:n,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:t,signal:a},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[Gn].method}get url(){return Xn(this[Gn].parsedURL)}get headers(){return this[Gn].headers}get redirect(){return this[Gn].redirect}get signal(){return this[Gn].signal}clone(){return new Qn(this)}}function eo(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}Tn.mixIn(Qn.prototype),Object.defineProperty(Qn.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Qn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),eo.prototype=Object.create(Error.prototype),eo.prototype.constructor=eo,eo.prototype.name="AbortError";const to=S.default.PassThrough,ro=L.default.resolve;function no(e,t){if(!no.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Tn.Promise=no.Promise,new no.Promise((function(r,n){const o=new Qn(e,t),i=function(e){const t=e[Gn].parsedURL,r=new qn(e[Gn].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof S.default.Readable&&!Zn)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(n="0"),null!=e.body){const t=Rn(e);"number"==typeof t&&(n=String(t))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let o=e.agent;return"function"==typeof o&&(o=o(t)),r.has("Connection")||o||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:Fn(r),agent:o})}(o),a=("https:"===i.protocol?O.default:x.default).request,s=o.signal;let u=null;const c=function(){let e=new eo("The user aborted a request.");n(e),o.body&&o.body instanceof S.default.Readable&&o.body.destroy(e),u&&u.body&&u.body.emit("error",e)};if(s&&s.aborted)return void c();const f=function(){c(),p()},l=a(i);let d;function p(){l.abort(),s&&s.removeEventListener("abort",f),clearTimeout(d)}s&&s.addEventListener("abort",f),o.timeout&&l.once("socket",(function(e){d=setTimeout((function(){n(new En("network timeout at: "+o.url,"request-timeout")),p()}),o.timeout)})),l.on("error",(function(e){n(new En(`request to ${o.url} failed, reason: ${e.message}`,"system",e)),p()})),l.on("response",(function(e){clearTimeout(d);const t=function(e){const t=new qn;for(const r of Object.keys(e))if(!Nn.test(r))if(Array.isArray(e[r]))for(const n of e[r])_n.test(n)||(void 0===t[zn][r]?t[zn][r]=[n]:t[zn][r].push(n));else _n.test(e[r])||(t[zn][r]=[e[r]]);return t}(e.headers);if(no.isRedirect(e.statusCode)){const i=t.get("Location"),a=null===i?null:ro(o.url,i);switch(o.redirect){case"error":return n(new En("uri requested responds with a redirect, redirect mode is set to error: "+o.url,"no-redirect")),void p();case"manual":if(null!==a)try{t.set("Location",a)}catch(e){n(e)}break;case"follow":if(null===a)break;if(o.counter>=o.follow)return n(new En("maximum redirect reached at: "+o.url,"max-redirect")),void p();const i={headers:new qn(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body,signal:o.signal,timeout:o.timeout,size:o.size};return 303!==e.statusCode&&o.body&&null===Rn(o)?(n(new En("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void p()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(i.method="GET",i.body=void 0,i.headers.delete("content-length")),r(no(new Qn(a,i))),void p())}}e.once("end",(function(){s&&s.removeEventListener("abort",f)}));let i=e.pipe(new to);const a={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:o.size,timeout:o.timeout,counter:o.counter},c=t.get("Content-Encoding");if(!o.compress||"HEAD"===o.method||null===c||204===e.statusCode||304===e.statusCode)return u=new Wn(i,a),void r(u);const l={flush:E.default.Z_SYNC_FLUSH,finishFlush:E.default.Z_SYNC_FLUSH};if("gzip"==c||"x-gzip"==c)return i=i.pipe(E.default.createGunzip(l)),u=new Wn(i,a),void r(u);if("deflate"!=c&&"x-deflate"!=c){if("br"==c&&"function"==typeof E.default.createBrotliDecompress)return i=i.pipe(E.default.createBrotliDecompress()),u=new Wn(i,a),void r(u);u=new Wn(i,a),r(u)}else{e.pipe(new to).once("data",(function(e){i=8==(15&e[0])?i.pipe(E.default.createInflate()):i.pipe(E.default.createInflateRaw()),u=new Wn(i,a),r(u)}))}})),function(e,t){const r=t.body;null===r?e.end():kn(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(l,o)}))}no.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},no.Promise=global.Promise;var oo=Object.freeze({__proto__:null,default:no,Headers:qn,Request:Qn,Response:Wn,FetchError:En}),io=function(e,t){return(io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function ao(e,t){function r(){this.constructor=e}io(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var so=function(){return(so=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function uo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function co(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function fo(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function lo(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function po(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function ho(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(po(arguments[t]));return e}function vo(e){return this instanceof vo?(this.v=e,this):new vo(e)}function go(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=o[e](t)).value instanceof vo?Promise.resolve(r.value.v).then(u,c):f(i[0][2],r)}catch(e){f(i[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function f(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function yo(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=lo(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}var mo=function(e){return function(t){return function(r){return co(void 0,void 0,void 0,(function(){return fo(this,(function(n){return[2,e.retryStrategy.retry(t,r)]}))}))}}},bo={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},wo=function(e){return{applyToStack:function(t){t.add(mo(e),bo)}}},So=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),Eo=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,r=new e(so(so({},this),{headers:so({},this.headers)}));return r.query&&(r.query=(t=r.query,Object.keys(t).reduce((function(e,r){var n,o=t[r];return so(so({},e),((n={})[r]=Array.isArray(o)?ho(o):o,n))}),{}))),r},e}();for(var xo=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Co=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],Ao=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],To=[500,502,503,504],Lo=function(e){var t;return Co.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},Oo=function(){return T.default.randomBytes(16)},ko=[],jo=0;jo<256;++jo)ko[jo]=(jo+256).toString(16).substr(1);var Po,Ro,No=function(e,t){var r=t||0,n=ko;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},_o=0,Io=0;var Mo=function(e,t,r){var n=t&&r||0,o=t||[],i=(e=e||{}).node||Po,a=void 0!==e.clockseq?e.clockseq:Ro;if(null==i||null==a){var s=Oo();null==i&&(i=Po=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=Ro=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:Io+1,f=u-_o+(c-Io)/1e4;if(f<0&&void 0===e.clockseq&&(a=a+1&16383),(f<0||u>_o)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_o=u,Io=c,Ro=a;var l=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=255&l;var d=u/4294967296*1e4&268435455;o[n++]=d>>>8&255,o[n++]=255&d,o[n++]=d>>>24&15|16,o[n++]=d>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(var p=0;p<6;++p)o[n+p]=i[p];return t||No(o)};var Do=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||Oo)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||No(o)},zo=Do;zo.v1=Mo,zo.v4=Do;var qo=zo,Bo=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},Uo=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return xo.includes(e.name)}(e)||Lo(e)||function(e){var t;return Ao.includes(e.name)||To.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},$o=function(){function e(e,t){var r,n,o,i,a,s,u,c;this.maxAttemptsProvider=e,this.retryDecider=null!==(r=null==t?void 0:t.retryDecider)&&void 0!==r?r:Uo,this.delayDecider=null!==(n=null==t?void 0:t.delayDecider)&&void 0!==n?n:Bo,this.retryQuota=null!==(o=null==t?void 0:t.retryQuota)&&void 0!==o?o:(a=i=500,s=i,u=function(e){return"TimeoutError"===e.name?10:5},c=function(e){return u(e)<=s},Object.freeze({hasRetryTokens:c,retrieveRetryTokens:function(e){if(!c(e))throw new Error("No retry token available");var t=u(e);return s-=t,t},releaseRetryTokens:function(e){s+=null!=e?e:1,s=Math.min(s,a)}}))}return e.prototype.shouldRetry=function(e,t,r){return t<r&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return co(this,void 0,void 0,(function(){var e;return fo(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return co(this,void 0,void 0,(function(){var r,n,o,i,a,s,u,c;return fo(this,(function(f){switch(f.label){case 0:return n=0,o=0,[4,this.getMaxAttempts()];case 1:i=f.sent(),a=t.request,Eo.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=qo.v4()),s=function(){var s,c,f,l,d;return fo(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,,5]),Eo.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt="+(n+1)+"; max="+i),[4,e(t)];case 1:return s=p.sent(),c=s.response,f=s.output,u.retryQuota.releaseRetryTokens(r),f.$metadata.attempts=n+1,f.$metadata.totalRetryDelay=o,[2,{value:{response:c,output:f}}];case 2:return l=p.sent(),n++,u.shouldRetry(l,n,i)?(r=u.retryQuota.retrieveRetryTokens(l),d=u.delayDecider(Lo(l)?500:100,n),o+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return p.sent(),[2,"continue"];case 4:throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=n,l.$metadata.totalRetryDelay=o,l;case 5:return[2]}}))},u=this,f.label=2;case 2:return[5,s()];case 3:return"object"==typeof(c=f.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),Ko={environmentVariableSelector:function(e){var t=e.AWS_MAX_ATTEMPTS;if(t){var r=parseInt(t);if(Number.isNaN(r))throw new Error('Environment variable AWS_MAX_ATTEMPTS mast be a number, got "'+t+'"');return r}},configFileSelector:function(e){var t=e.max_attempts;if(t){var r=parseInt(t);if(Number.isNaN(r))throw new Error('Shared config file entry max_attempts mast be a number, got "'+t+'"');return r}},default:3},Fo=function(e){var t=Ho(e.maxAttempts);return so(so({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new $o(t)})},Ho=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Vo={environmentVariableSelector:function(e){return e.AWS_RETRY_MODE},configFileSelector:function(e){return e.retry_mode},default:"standard"},Wo=Object.freeze({__proto__:null,retryMiddleware:mo,retryMiddlewareOptions:bo,getRetryPlugin:wo,DEFAULT_MAX_ATTEMPTS:3,DEFAULT_RETRY_MODE:"standard",StandardRetryStrategy:$o,ENV_MAX_ATTEMPTS:"AWS_MAX_ATTEMPTS",CONFIG_MAX_ATTEMPTS:"max_attempts",NODE_MAX_ATTEMPT_CONFIG_OPTIONS:Ko,resolveRetryConfig:Fo,ENV_RETRY_MODE:"AWS_RETRY_MODE",CONFIG_RETRY_MODE:"retry_mode",NODE_RETRY_MODE_CONFIG_OPTIONS:Vo,defaultDelayDecider:Bo,defaultRetryDecider:Uo}),Go="@aws-sdk/client-s3",Jo="1.0.0-rc.3",Xo=function(e){var t=e.endpoint,r=e.urlParser;if("string"==typeof t){var n=Promise.resolve(r(t));return function(){return n}}if("object"==typeof t){var o=Promise.resolve(t);return function(){return o}}return t},Zo=function(e){return co(void 0,void 0,void 0,(function(){var t,r,n,o,i;return fo(this,(function(a){switch(a.label){case 0:return t=e.tls,r=void 0===t||t,[4,e.region()];case 1:if(n=a.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(n)];case 2:if(!(o=(null!==(i=a.sent())&&void 0!==i?i:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((r?"https:":"http:")+"//"+o)]}}))}))},Yo={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},Qo=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},ei=function(e){function t(t,r){void 0===r&&(r=!0);var n=e.call(this,t)||this;return n.tryNextLink=r,n}return ao(t,e),t}(Error);function ti(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){var t,r,n=Promise.reject(new ei("No providers in chain")),o=function(e){n=n.catch((function(t){if(null==t?void 0:t.tryNextLink)return e();throw t}))};try{for(var i=lo(e),a=i.next();!a.done;a=i.next()){o(a.value)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}}var ri=function(e,t,r){var n,o;if(void 0===t)return function(){return o||(n=e(),o=!0),n};var i=!1;return function(){return co(void 0,void 0,void 0,(function(){var a;return fo(this,(function(s){switch(s.label){case 0:return o||(n=e(),o=!0),i?[2,n]:[4,n];case 1:return a=s.sent(),r&&!r(a)?(i=!0,[2,a]):t(a)?[2,n=e()]:[2,a]}}))}))}};function ni(e){return new Promise((function(t,r){var n=i.request(so({method:"GET"},e));n.on("error",(function(e){r(Object.assign(new ei("Unable to connect to instance metadata service"),e))})),n.on("timeout",(function(){r(new Error("TimeoutError"))})),n.on("response",(function(e){var n=e.statusCode,o=void 0===n?400:n;(o<200||300<=o)&&r(Object.assign(new ei("Error response received from instance metadata service"),{statusCode:o}));var i=[];e.on("data",(function(e){i.push(e)})),e.on("end",(function(){t(s.Buffer.concat(i))}))})),n.end()}))}var oi=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},ii=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},ai=function(e){var t=e.maxRetries,r=void 0===t?0:t,n=e.timeout;return{maxRetries:r,timeout:void 0===n?1e3:n}},si=function(e,t){for(var r=e(),n=0;n<t;n++)r=r.catch(e);return r},ui="AWS_CONTAINER_CREDENTIALS_FULL_URI",ci="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";function fi(e){var t=this;void 0===e&&(e={});var r=ai(e),n=r.timeout,o=r.maxRetries;return function(){return function(){if(process.env[ci])return Promise.resolve({hostname:"169.254.170.2",path:process.env[ci]});if(process.env[ui]){var e=f.parse(process.env[ui]);return e.hostname&&e.hostname in di?e.protocol&&e.protocol in pi?Promise.resolve(so(so({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new ei(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new ei(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new ei("The container metadata credential provider cannot be used unless the "+ci+" or "+ui+" environment variable is set",!1))}().then((function(e){return si((function(){return co(t,void 0,void 0,(function(){var t,r,o;return fo(this,(function(i){switch(i.label){case 0:return o=(r=JSON).parse,[4,li(n,e)];case 1:if(t=o.apply(r,[i.sent()]),!oi(t))throw new ei("Invalid response received from instance metadata service.");return[2,ii(t)]}}))}))}),o)}))}}function li(e,t){if(process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN){var r=t.headers,n=void 0===r?{}:r;n.Authorization=process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,t.headers=n}return ni(so(so({},t),{timeout:e})).then((function(e){return e.toString()}))}var di={localhost:!0,"127.0.0.1":!0},pi={"http:":!0,"https:":!0};var hi="169.254.169.254",vi="/latest/meta-data/iam/security-credentials/",gi=function(e){return co(void 0,void 0,void 0,(function(){return fo(this,(function(t){return[2,ni(so(so({},e),{host:hi,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]}))}))},yi=function(e){return co(void 0,void 0,void 0,(function(){return fo(this,(function(t){switch(t.label){case 0:return[4,ni(so(so({},e),{host:hi,path:vi}))];case 1:return[2,t.sent().toString()]}}))}))},mi=function(e,t){return co(void 0,void 0,void 0,(function(){var r,n,o;return fo(this,(function(i){switch(i.label){case 0:return o=(n=JSON).parse,[4,ni(so(so({},t),{host:hi,path:vi+e}))];case 1:if(r=o.apply(n,[i.sent().toString()]),!oi(r))throw new ei("Invalid response received from instance metadata service.");return[2,ii(r)]}}))}))},bi=function(){return{}};function wi(e){void 0===e&&(e={});var t=e.filepath,r=void 0===t?process.env.AWS_SHARED_CREDENTIALS_FILE||h.join(Ai(),".aws","credentials"):t,n=e.configFilepath,o=void 0===n?process.env.AWS_CONFIG_FILE||h.join(Ai(),".aws","config"):n;return Promise.all([Ci(o).then(xi).then(Ei).catch(bi),Ci(r).then(xi).catch(bi)]).then((function(e){var t=po(e,2);return{configFile:t[0],credentialsFile:t[1]}}))}var Si=/^profile\s(["'])?([^\1]+)\1$/;function Ei(e){var t,r,n={};try{for(var o=lo(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value,s=void 0;if("default"===a)n.default=e.default;else if(s=Si.exec(a)){var u=po(s,3),c=(u[0],u[1],u[2]);c&&(n[c]=e[a])}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}function xi(e){var t,r,n,o={};try{for(var i=lo(e.split(/\r?\n/)),a=i.next();!a.done;a=i.next()){var s=a.value,u=(s=s.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(u)n=u[1];else if(n){var c=s.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);c&&(o[n]=o[n]||{},o[n][c[1]]=c[2])}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o}function Ci(e){return new Promise((function(t,r){d.readFile(e,"utf8",(function(e,n){e?r(e):t(n)}))}))}function Ai(){var e=process.env,t=e.HOME,r=e.USERPROFILE,n=e.HOMEPATH,o=e.HOMEDRIVE,i=void 0===o?"C:"+h.sep:o;return t||(r||(n?""+i+n:p.homedir()))}function Ti(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1}function Li(e){return void 0===e&&(e={}),function(){return ji(e).then((function(t){return ki(Oi(e),t,e)}))}}function Oi(e){return e.profile||process.env.AWS_PROFILE||"default"}function ki(e,t,r,n){return void 0===n&&(n={}),co(this,void 0,void 0,(function(){var o,i,a,s,u,c,f,l,d,p,h,v,g;return fo(this,(function(y){switch(y.label){case 0:if(o=t[e],Object.keys(n).length>0&&Ti(o))return[2,Pi(o)];if(m=o,!(Boolean(m)&&"object"==typeof m&&"string"==typeof m.role_arn&&"string"==typeof m.source_profile&&["undefined","string"].indexOf(typeof m.role_session_name)>-1&&["undefined","string"].indexOf(typeof m.external_id)>-1&&["undefined","string"].indexOf(typeof m.mfa_serial)>-1))return[3,4];if(i=o.external_id,a=o.mfa_serial,s=o.role_arn,u=o.role_session_name,c=void 0===u?"aws-sdk-js-"+Date.now():u,f=o.source_profile,!r.roleAssumer)throw new ei("Profile "+e+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(f in n)throw new ei("Detected a cycle attempting to resolve credentials for profile "+Oi(r)+". Profiles visited: "+Object.keys(n).join(", "),!1);if(l=ki(f,t,r,so(so({},n),((g={})[f]=!0,g))),d={RoleArn:s,RoleSessionName:c,ExternalId:i},!a)return[3,2];if(!r.mfaCodeProvider)throw new ei("Profile "+e+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return d.SerialNumber=a,p=d,[4,r.mfaCodeProvider(a)];case 1:p.TokenCode=y.sent(),y.label=2;case 2:return v=(h=r).roleAssumer,[4,l];case 3:return[2,v.apply(h,[y.sent(),d])];case 4:if(Ti(o))return[2,Pi(o)];throw new ei("Profile "+e+" could not be found or parsed in shared credentials file.")}var m}))}))}function ji(e){var t=e.loadedConfig;return(void 0===t?wi(e):t).then((function(e){var t=e.configFile,r=e.credentialsFile;return so(so({},t),r)}))}function Pi(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function Ri(e){return void 0===e&&(e={}),function(){return ji(e).then((function(t){return function(e,t,r){return co(this,void 0,void 0,(function(){var r,n;return fo(this,(function(o){switch(o.label){case 0:return r=t[e],t[e]?void 0===(n=r.credential_process)?[3,2]:[4,Ni(n).then((function(t){var r;try{r=JSON.parse(t)}catch(t){throw Error("Profile "+e+" credential_process returned invalid JSON.")}var n,o=r.Version,i=r.AccessKeyId,a=r.SecretAccessKey,s=r.SessionToken,u=r.Expiration;if(1!==o)throw Error("Profile "+e+" credential_process did not return Version 1.");if(void 0===i||void 0===a)throw Error("Profile "+e+" credential_process returned invalid credentials.");if(u){var c=new Date;if(new Date(u)<c)throw Error("Profile "+e+" credential_process returned expired credentials.");n=Math.floor(new Date(u).valueOf()/1e3)}return{accessKeyId:i,secretAccessKey:a,sessionToken:s,expirationUnix:n}})).catch((function(e){throw new ei(e.message)}))]:[3,4];case 1:return[2,o.sent()];case 2:throw new ei("Profile "+e+" did not contain credential_process.");case 3:return[3,5];case 4:throw new ei("Profile "+e+" could not be found in shared credentials file.");case 5:return[2]}}))}))}(Oi(e),t)}))}}function Ni(e){return new Promise((function(t,r){v.exec(e,(function(e,n){e?r(e):t(n.trim())}))}))}var _i=function(e,t){return(_i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var Ii=function(){return(Ii=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Mi(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Di(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function zi(e){return this instanceof zi?(this.v=e,this):new zi(e)}for(var qi=Object.freeze({__proto__:null,__extends:function(e,t){function r(){this.constructor=e}_i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return Ii},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},__decorate:function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__param:function(e,t){return function(r,n){t(r,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator:function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},__createBinding:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},__exportStar:function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])},__values:Mi,__read:Di,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Di(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n},__await:zi,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=o[e](t)).value instanceof zi?Promise.resolve(r.value.v).then(u,c):f(i[0][2],r)}catch(e){f(i[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function f(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},__asyncDelegator:function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:zi(e[n](t)),done:"return"===n}:o?o(t):t}:o}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Mi(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}}),Bi=V((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Crc32=t.crc32=void 0,t.crc32=function(e){return(new r).update(e).digest()};var r=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var o=qi.__values(e),i=o.next();!i.done;i=o.next()){var a=i.value;this.checksum=this.checksum>>>8^n[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=r;var n=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])})),Ui={},$i={},Ki=0;Ki<256;Ki++){var Fi=Ki.toString(16).toLowerCase();1===Fi.length&&(Fi="0"+Fi),Ui[Ki]=Fi,$i[Fi]=Ki}function Hi(e){for(var t="",r=0;r<e.byteLength;r++)t+=Ui[e[r]];return t}var Vi=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var r=new Uint8Array(8),n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Wi(r),new e(r)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&Wi(e),parseInt(Hi(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function Wi(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var Gi,Ji=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,r,n,o,i=[];try{for(var a=lo(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,c=this.fromUtf8(u);i.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}var f=new Uint8Array(i.reduce((function(e,t){return e+t.byteLength}),0)),l=0;try{for(var d=lo(i),p=d.next();!p.done;p=d.next()){var h=p.value;f.set(h,l),l+=h.byteLength}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return f},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":var n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":var o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);var i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":var a=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+a.byteLength));s.setUint8(0,7),s.setUint16(1,a.byteLength,!1);var u=new Uint8Array(s.buffer);return u.set(a,3),u;case"timestamp":var c=new Uint8Array(9);return c[0]=8,c.set(Vi.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!ia.test(e.value))throw new Error("Invalid UUID received: "+e.value);var f=new Uint8Array(17);return f[0]=9,f.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var n=e.substr(r,2).toLowerCase();if(!(n in $i))throw new Error("Cannot decode unrecognized sequence "+n+" as hexadecimal");t[r/2]=$i[n]}return t}(e.value.replace(/\-/g,"")),1),f}},e.prototype.parse=function(e){for(var t={},r=0;r<e.byteLength;){var n=e.getUint8(r++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[o]={type:Xi,value:!0};break;case 1:t[o]={type:Xi,value:!1};break;case 2:t[o]={type:Zi,value:e.getInt8(r++)};break;case 3:t[o]={type:Yi,value:e.getInt16(r,!1)},r+=2;break;case 4:t[o]={type:Qi,value:e.getInt32(r,!1)},r+=4;break;case 5:t[o]={type:ea,value:new Vi(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:var i=e.getUint16(r,!1);r+=2,t[o]={type:ta,value:new Uint8Array(e.buffer,e.byteOffset+r,i)},r+=i;break;case 7:var a=e.getUint16(r,!1);r+=2,t[o]={type:ra,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:t[o]={type:na,value:new Date(new Vi(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:var s=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[o]={type:oa,value:Hi(s.subarray(0,4))+"-"+Hi(s.subarray(4,6))+"-"+Hi(s.subarray(6,8))+"-"+Hi(s.subarray(8,10))+"-"+Hi(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(Gi||(Gi={}));var Xi="boolean",Zi="byte",Yi="short",Qi="integer",ea="long",ta="binary",ra="string",na="timestamp",oa="uuid",ia=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var aa=function(){function e(e,t){this.headerMarshaller=new Ji(e,t)}return e.prototype.marshall=function(e){var t=e.headers,r=e.body,n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,i=new Uint8Array(o),a=new DataView(i.buffer,i.byteOffset,i.byteLength),s=new Bi.Crc32;return a.setUint32(0,o,!1),a.setUint32(4,n.byteLength,!1),a.setUint32(8,s.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),a.setUint32(o-4,s.update(i.subarray(8,o-4)).digest(),!1),i},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,r=e.byteOffset,n=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=new DataView(n,r,t),i=o.getUint32(0,!1);if(t!==i)throw new Error("Reported message length does not match received message length");var a=o.getUint32(4,!1),s=o.getUint32(8,!1),u=o.getUint32(t-4,!1),c=(new Bi.Crc32).update(new Uint8Array(n,r,8));if(s!==c.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(n,r+8,t-12)),u!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+u);return{headers:new DataView(n,r+8+4,a),body:new Uint8Array(n,r+8+4+a,i-a-16)}}(e),r=t.headers,n=t.body;return{headers:this.headerMarshaller.parse(r),body:n}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();var sa=function(){function e(e){var t=e.utf8Encoder,r=e.utf8Decoder;this.eventMarshaller=new aa(t,r),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){var r,n,o,i,a,s,u;return function(e,t){var r;return(r={})[Symbol.asyncIterator]=function(){return go(this,arguments,(function(){var r,n,o,i,a,s,u,c,f,l,d,p,h,v,g,y,m;return fo(this,(function(b){switch(b.label){case 0:b.trys.push([0,12,13,18]),r=yo(e),b.label=1;case 1:return[4,vo(r.next())];case 2:if((n=b.sent()).done)return[3,11];if(o=n.value,i=t.eventMarshaller.unmarshall(o),"error"!==(a=i.headers[":message-type"].value))return[3,3];throw(s=new Error(i.headers[":error-message"].value||"UnknownError")).name=i.headers[":error-code"].value,s;case 3:return"exception"!==a?[3,5]:(u=i.headers[":exception-type"].value,(v={})[u]=i,c=v,[4,vo(t.deserializer(c))]);case 4:if((f=b.sent()).$unknown)throw(l=new Error(t.toUtf8(i.body))).name=u,l;throw f[u];case 5:return"event"!==a?[3,9]:((g={})[i.headers[":event-type"].value]=i,d=g,[4,vo(t.deserializer(d))]);case 6:return(p=b.sent()).$unknown?[3,10]:[4,vo(p)];case 7:return[4,b.sent()];case 8:return b.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+i.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return h=b.sent(),y={error:h},[3,18];case 13:return b.trys.push([13,,16,17]),n&&!n.done&&(m=r.return)?[4,vo(m.call(r))]:[3,15];case 14:b.sent(),b.label=15;case 15:return[3,17];case 16:if(y)throw y.error;return[7];case 17:return[7];case 18:return[2]}}))}))},r}((r=e,o=0,i=0,a=null,s=null,u=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);o=e,i=4,a=new Uint8Array(e),new DataView(a.buffer).setUint32(0,e,!1)},(n={})[Symbol.asyncIterator]=function(){return go(this,arguments,(function(){var e,t,n,c,f,l,d,p;return fo(this,(function(h){switch(h.label){case 0:e=r[Symbol.asyncIterator](),h.label=1;case 1:return[4,vo(e.next())];case 2:return t=h.sent(),n=t.value,t.done?o?[3,4]:[4,vo(void 0)]:[3,10];case 3:return[2,h.sent()];case 4:return o!==i?[3,7]:[4,vo(a)];case 5:return[4,h.sent()];case 6:return h.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,vo(void 0)];case 9:return[2,h.sent()];case 10:c=n.length,f=0,h.label=11;case 11:if(!(f<c))return[3,15];if(!a){if(l=c-f,s||(s=new Uint8Array(4)),d=Math.min(4-i,l),s.set(n.slice(f,f+d),i),f+=d,(i+=d)<4)return[3,15];u(new DataView(s.buffer).getUint32(0,!1)),s=null}return p=Math.min(o-i,c-f),a.set(n.slice(f,f+p),i),i+=p,f+=p,o&&o===i?[4,vo(a)]:[3,14];case 12:return[4,h.sent()];case 13:h.sent(),a=null,o=0,i=0,h.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},n),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var r,n=this;return(r={})[Symbol.asyncIterator]=function(){return go(this,arguments,(function(){var r,o,i,a,s,u;return fo(this,(function(c){switch(c.label){case 0:c.trys.push([0,7,8,13]),r=yo(e),c.label=1;case 1:return[4,vo(r.next())];case 2:return(o=c.sent()).done?[3,6]:(i=o.value,[4,vo(n.eventMarshaller.marshall(t(i)))]);case 3:return[4,c.sent()];case 4:c.sent(),c.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return a=c.sent(),s={error:a},[3,13];case 8:return c.trys.push([8,,11,12]),o&&!o.done&&(u=r.return)?[4,vo(u.call(r))]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(s)throw s.error;return[7];case 12:return[7];case 13:return[4,vo(new Uint8Array(0))];case 14:return[4,c.sent()];case 15:return c.sent(),[2]}}))}))},r},e}();var ua=function(){function e(e){var t=e.utf8Encoder,r=e.utf8Decoder;this.eventMarshaller=new aa(t,r),this.universalMarshaller=new sa({utf8Decoder:r,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var r="function"==typeof e[Symbol.asyncIterator]?e:function(e){return go(this,arguments,(function(){var t,r,n,o;return fo(this,(function(i){switch(i.label){case 0:t=!1,r=!1,n=new Array,e.on("error",(function(e){if(t||(t=!0),e)throw e})),e.on("data",(function(e){n.push(e)})),e.on("end",(function(){t=!0})),i.label=1;case 1:return r?[3,6]:[4,vo(new Promise((function(e){return setTimeout((function(){return e(n.shift())}),0)})))];case 2:return(o=i.sent())?[4,vo(o)]:[3,5];case 3:return[4,i.sent()];case 4:i.sent(),i.label=5;case 5:return r=t&&0===n.length,[3,1];case 6:return[2]}}))}))}(e);return this.universalMarshaller.deserialize(r,t)},e.prototype.serialize=function(e,t){var r=this.universalMarshaller.serialize(e,t);if("function"==typeof n.Readable.from)return n.Readable.from(r);var o=r[Symbol.asyncIterator](),i=new n.Readable({autoDestroy:!0,objectMode:!0,read:function(){return co(this,void 0,void 0,(function(){var e=this;return fo(this,(function(t){return o.next().then((function(t){var r=t.done,n=t.value;r?e.push(null):e.push(n)})).catch((function(t){e.destroy(t)})),[2]}))}))}});return i.on("error",(function(){i.destroy()})),i.on("end",(function(){i.destroy()})),i},e}(),ca=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},fa=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=e.byteLength-t),!ca(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return s.Buffer.from(e,t,r)},la=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?s.Buffer.from(e,t):s.Buffer.from(e)},da=function(){function e(e,t){this.hash=t?c.createHmac(e,pa(t)):c.createHash(e)}return e.prototype.update=function(e,t){this.hash.update(pa(e,t))},e.prototype.digest=function(){return Promise.resolve(this.hash.digest())},e}();function pa(e,t){return s.Buffer.isBuffer(e)?e:"string"==typeof e?la(e,t):ArrayBuffer.isView(e)?fa(e.buffer,e.byteOffset,e.byteLength):fa(e)}var ha=function(e){function t(t,r){var n=e.call(this,r)||this;return n.hash=t,n}return ao(t,e),t.prototype._write=function(e,t,r){try{this.hash.update(e)}catch(e){return r(e)}r()},t}(n.Writable);var va=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},ga=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,ya=/(\d+\.){3}\d+/,ma=/\.\./,ba=/\./,wa=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,Sa=/^s3(-external-1)?\.amazonaws\.com$/,Ea=function(e){return Ca(e)?e.replace(/fips-|-fips/,""):e},xa=function(e){var t=e.match(wa);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},Ca=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Aa=function(e,t){return e===t||Ea(e)===t||e===Ea(t)},Ta=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&ba.test(e))throw new Error("Invalid DNS label "+e)},La=function(e){var t=e.baseHostname;return wa.test(t)?function(e){return"string"==typeof e.bucketName}(e)?ka(e):Oa(e):{bucketEndpoint:!1,hostname:t}},Oa=function(e){var t,r=po((t=e.baseHostname,Sa.test(t)?[t.replace(".amazonaws.com",""),"amazonaws.com"]:xa(t)),2),n=r[0],o=r[1],i=e.pathStyleEndpoint,a=e.dualstackEndpoint,s=void 0!==a&&a,u=e.accelerateEndpoint,c=void 0!==u&&u,f=e.tlsCompatible,l=void 0===f||f,d=e.useArnRegion,p=e.bucketName,h=e.clientPartition,v=void 0===h?"aws":h,g=e.clientSigningRegion,y=void 0===g?n:g;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:i,accelerateEndpoint:c,tlsCompatible:l});var m=p.service,b=p.partition,w=p.accountId,S=p.region,E=p.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(m),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(b,{clientPartition:v}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(w),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!Aa(e,t.clientRegion)&&!Aa(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&Ca(e))throw new Error("Endpoint does not support FIPS region")}(S,{useArnRegion:d,clientRegion:n,clientSigningRegion:y});var x=function(e){var t=e.includes(":")?":":"/",r=po(e.split(t)),n=r[0],o=r.slice(1);if("accesspoint"===n){if(1!==o.length||""===o[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:o[0]}}if("outpost"===n){if(!o[0]||"accesspoint"!==o[1]||!o[2]||3!==o.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var i=po(o,3),a=i[0];return i[1],{outpostId:a,accesspointName:i[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(E),C=x.accesspointName,A=x.outpostId;Ta(C+"-"+w,{tlsCompatible:l});var T=d?S:n,L=d?S:y;return A?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(m),Ta(A,{tlsCompatible:l}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(s),function(e){if(Ca(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(T),{bucketEndpoint:!0,hostname:C+"-"+w+"."+A+".s3-outposts."+T+"."+o,signingRegion:L,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(m),{bucketEndpoint:!0,hostname:C+"-"+w+".s3-accesspoint"+(s?".dualstack":"")+"."+T+"."+o,signingRegion:L})},ka=function(e){var t,r=e.accelerateEndpoint,n=void 0!==r&&r,o=e.baseHostname,i=e.bucketName,a=e.dualstackEndpoint,s=void 0!==a&&a,u=e.pathStyleEndpoint,c=void 0!==u&&u,f=e.tlsCompatible,l=void 0===f||f,d=po((t=o,Sa.test(t)?["us-east-1","amazonaws.com"]:xa(t)),2),p=d[0],h=d[1];return c||!function(e){return ga.test(e)&&!ya.test(e)&&!ma.test(e)}(i)||l&&ba.test(i)?{bucketEndpoint:!1,hostname:s?"s3.dualstack."+p+"."+h:o}:(n?o="s3-accelerate"+(s?".dualstack":"")+"."+h:s&&(o="s3.dualstack."+p+"."+h),{bucketEndpoint:!0,hostname:i+"."+o})},ja=function(e){return function(t,r){return function(n){return co(void 0,void 0,void 0,(function(){var o,i,a,s,u,c,f,l,d,p,h,v,g,y,m,b,w;return fo(this,(function(S){switch(S.label){case 0:return o=n.input.Bucket,i=e.bucketEndpoint,a=n.request,Eo.isInstance(a)?e.bucketEndpoint?(a.hostname=o,[3,6]):[3,1]:[3,7];case 1:return va(o)?(s=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var r=po(t);return{partition:r[1],service:r[2],region:r[3],accountId:r[4],resource:r.slice(5).join(":")}}(o),c=Ea,[4,e.region()]):[3,5];case 2:return u=c.apply(void 0,[S.sent()]),[4,e.regionInfoProvider(u)];case 3:return f=S.sent()||{},l=f.partition,d=f.signingRegion,p=void 0===d?u:d,[4,e.useArnRegion()];case 4:return h=S.sent(),v=La({bucketName:s,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,useArnRegion:h,clientPartition:l,clientSigningRegion:p}),b=v.hostname,w=v.bucketEndpoint,g=v.signingRegion,y=v.signingService,g&&g!==p&&(r.signing_region=g),y&&"s3"!==y&&(r.signing_service=y),a.hostname=b,i=w,[3,6];case 5:m=La({bucketName:o,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol}),b=m.hostname,w=m.bucketEndpoint,a.hostname=b,i=w,S.label=6;case 6:i&&(a.path=a.path.replace(/^(\/)?[^\/]+/,""),""===a.path&&(a.path="/")),S.label=7;case 7:return[2,t(so(so({},n),{request:a}))]}}))}))}}},Pa={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"},Ra=function(e){return{applyToStack:function(t){t.addRelativeTo(ja(e),Pa)}}};var Na={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,"AWS_S3_USE_ARN_REGION")){if("true"===e.AWS_S3_USE_ARN_REGION)return!0;if("false"===e.AWS_S3_USE_ARN_REGION)return!1;throw new Error('Cannot load env AWS_S3_USE_ARN_REGION. Expected "true" or "false", got '+e.AWS_S3_USE_ARN_REGION+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,"s3_use_arn_region")){if("true"===e.s3_use_arn_region)return!0;if("false"===e.s3_use_arn_region)return!1;throw new Error('Cannot load shared config entry s3_use_arn_region. Expected "true" or "false", got '+e.s3_use_arn_region+".")}},default:!1},_a=function(e){return function(e){return"function"==typeof e}(e)?function(){return co(void 0,void 0,void 0,(function(){return fo(this,(function(t){return[2,e()]}))}))}:(t=e,function(){return Promise.resolve(t)});var t},Ia=function(e,t){var r,n=e.environmentVariableSelector,o=e.configFileSelector,i=e.default;return void 0===t&&(t={}),ri(ti((r=n,function(){return co(void 0,void 0,void 0,(function(){var e;return fo(this,(function(t){try{if(void 0===(e=r(process.env)))throw new Error;return[2,e]}catch(e){throw new ei(e.message||"Cannot load config from environment variables with getter: "+r)}return[2]}))}))}),function(e,t){void 0===t&&(t={});var r=t.preferredFile,n=void 0===r?"config":r,o=uo(t,["preferredFile"]);return function(){return co(void 0,void 0,void 0,(function(){var t,r,i,a,s,u,c,f,l,d,p;return fo(this,(function(h){switch(h.label){case 0:return t=o.loadedConfig,r=void 0===t?wi(o):t,i=o.profile,a=void 0===i?process.env.AWS_PROFILE||"default":i,[4,r];case 1:s=h.sent(),u=s.configFile,c=s.credentialsFile,f=c[a]||{},l=u[a]||{},d="config"===n?so(so({},f),l):so(so({},l),f);try{if(void 0===(p=e(d)))throw new Error;return[2,p]}catch(t){throw new ei(t.message||"Cannot load config for profile "+a+" in SDK configuration files with getter: "+e)}return[2]}}))}))}}(o,t),_a(i)))},Ma=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Da)},Da=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};var za=function(e){var t,r,n={};try{for(var o=lo(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value,s=e[a];n[a]=Array.isArray(s)?s.join(","):s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n};function qa(e,t){t instanceof n.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var Ba=function(){function e(e){var t=void 0===e?{}:e,r=t.connectionTimeout,n=t.socketTimeout,o=t.httpAgent,a=t.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=r,this.socketTimeout=n;this.httpAgent=o||new i.Agent({keepAlive:true}),this.httpsAgent=a||new l.Agent({keepAlive:true})}return e.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},e.prototype.handle=function(e,t){var r=this,n=t.abortSignal;return new Promise((function(t,o){if(null==n?void 0:n.aborted){var a=new Error("Request aborted");return a.name="AbortError",void o(a)}var s="https:"===e.protocol,u=function(e){var t,r,n=[];try{for(var o=lo(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var a=i.value,s=e[a];if(a=Ma(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)n.push(a+"="+Ma(s[u]));else{var f=a;(s||"string"==typeof s)&&(f+="="+Ma(s)),n.push(f)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n.join("&")}(e.query||{}),c={headers:e.headers,host:e.hostname,method:e.method,path:u?e.path+"?"+u:e.path,port:e.port,agent:s?r.httpsAgent:r.httpAgent},f=(s?l.request:i.request)(c,(function(e){var r=new So({statusCode:e.statusCode||-1,headers:za(e.headers),body:e});t({response:r})}));f.on("error",o),function(e,t,r){void 0===r&&(r=0),r&&e.on("socket",(function(e){var n=this;if(e.connecting){var o=setTimeout((function(){n.abort();var e=new Error("Socket timed out without establishing a connection within "+r+" ms");e.name="TimeoutError",t(e)}),r);e.on("connect",(function(){clearTimeout(o)}))}}))}(f,o,r.connectionTimeout),function(e,t,r){void 0===r&&(r=0),e.setTimeout(r,(function(){this.abort();var e=new Error("Connection timed out after "+r+" ms");e.name="TimeoutError",t(e)}))}(f,o,r.socketTimeout),n&&(n.onabort=function(){f.abort();var e=new Error("Request aborted");e.name="AbortError",o(e)}),function(e,t){"100-continue"===(t.headers.Expect||t.headers.expect)?e.on("continue",(function(){qa(e,t.body)})):qa(e,t.body)}(f,e)}))},e}(),Ua=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bufferedBytes=[],t}return ao(t,e),t.prototype._write=function(e,t,r){this.bufferedBytes.push(e),r()},t}(n.Writable);const $a=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Ka=new Set(["cn-north-1","cn-northwest-1"]),Fa=new Set(["us-iso-east-1"]),Ha=new Set(["us-isob-east-1"]),Va=new Set(["us-gov-east-1","us-gov-west-1"]),Wa={...{apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:(e,t)=>{let r=void 0;switch(e){case"ap-east-1":r={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":r={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":r={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":r={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":r={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":r={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":r={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":r={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":r={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":r={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":r={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":r={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":r={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":r={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":r={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":r={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":r={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":r={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":r={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":r={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":r={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":r={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":r={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":r={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":r={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":r={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:$a.has(e)&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),Ka.has(e)&&(r={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Fa.has(e)&&(r={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Ha.has(e)&&(r={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Va.has(e)&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===r&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(r)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1},runtime:"node",base64Decoder:function(e){var t=la(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},base64Encoder:function(e){return fa(e.buffer,e.byteOffset,e.byteLength).toString("base64")},bodyLengthChecker:function(e){return e?"string"==typeof e?Buffer.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?d.lstatSync(e.path).size:void 0:0},credentialDefaultProvider:function(e){void 0===e&&(e={});var t=e.profile,r=(void 0===t?process.env.AWS_PROFILE:t)?Li(e):ti((function(){var e=process.env.AWS_ACCESS_KEY_ID,t=process.env.AWS_SECRET_ACCESS_KEY,r=process.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:process.env.AWS_SESSION_TOKEN,expiration:r?new Date(r):void 0}):Promise.reject(new ei("Unable to find environment variable credentials."))}),Li(e),Ri(e),function(e){if(process.env[ci]||process.env[ui])return fi(e);if(process.env.AWS_EC2_METADATA_DISABLED)return function(){return Promise.reject(new ei("EC2 Instance Metadata Service access disabled"))};return function(e){void 0===e&&(e={});var t=!1,r=ai(e),n=r.timeout,o=r.maxRetries,i=function(e,r){return co(void 0,void 0,void 0,(function(){var n;return fo(this,(function(o){switch(o.label){case 0:return[4,si((function(){return co(void 0,void 0,void 0,(function(){var e,n;return fo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,yi(r)];case 1:return e=o.sent(),[3,3];case 2:throw 401===(n=o.sent()).statusCode&&(t=!1),n;case 3:return[2,e]}}))}))}),e)];case 1:return n=o.sent().trim(),[2,si((function(){return co(void 0,void 0,void 0,(function(){var e,o;return fo(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,mi(n,r)];case 1:return e=i.sent(),[3,3];case 2:throw 401===(o=i.sent()).statusCode&&(t=!1),o;case 3:return[2,e]}}))}))}),e)]}}))}))};return function(){return co(void 0,void 0,void 0,(function(){var e,r;return fo(this,(function(a){switch(a.label){case 0:return t?[2,i(o,{timeout:n})]:[3,1];case 1:e=void 0,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,gi({timeout:n})];case 3:return e=a.sent().toString(),[3,5];case 4:if(400===(null==(r=a.sent())?void 0:r.statusCode))throw Object.assign(r,{message:"EC2 Metadata token request returned error"});return("TimeoutError"===r.message||[403,404,405].includes(r.statusCode))&&(t=!0),[2,i(o,{timeout:n})];case 5:return[2,i(o,{timeout:n,headers:{"x-aws-ec2-metadata-token":e}})]}}))}))}}(e)}(e));return ri(r,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration}))},defaultUserAgent:(Ga=Go,Ja=Jo,Xa=k.default.platform+"/"+k.default.version,k.default.env.AWS_EXECUTION_ENV&&(Xa+=" exec-env/"+k.default.env.AWS_EXECUTION_ENV),"aws-sdk-nodejs-v3-"+Ga+"/"+Ja+" "+Xa),eventStreamSerdeProvider:function(e){return new ua(e)},maxAttempts:Ia(Ko),md5:da.bind(null,"md5"),region:Ia(Yo,{preferredFile:"credentials"}),requestHandler:new Ba,sha256:da.bind(null,"sha256"),streamCollector:function(e){return new Promise((function(t,r){var n=new Ua;e.pipe(n),e.on("error",(function(e){n.end(),r(e)})),n.on("error",r),n.on("finish",(function(){var e=new Uint8Array(Buffer.concat(this.bufferedBytes));t(e)}))}))},streamHasher:function(e,t){return new Promise((function(r,n){if("string"==typeof t.path){var o=d.createReadStream(t.path,{start:t.start,end:t.end}),i=new e,a=new ha(i);o.pipe(a),o.on("error",(function(e){a.end(),n(e)})),a.on("error",n),a.on("finish",(function(){i.digest().then(r).catch(n)}))}else n(new Error("Unable to calculate hash for non-file streams."))}))},urlParser:function(e){var t,r=f.parse(e),n=r.hostname,o=void 0===n?"localhost":n,i=r.pathname,a=void 0===i?"/":i,s=r.port,u=r.protocol,c=void 0===u?"https:":u,l=r.search;return l&&(t=function(e){var t,r,n={};if(e=e.replace(/^\?/,""))try{for(var o=lo(e.split("&")),i=o.next();!i.done;i=o.next()){var a=po(i.value.split("="),2),s=a[0],u=a[1],c=void 0===u?null:u;s=decodeURIComponent(s),c&&(c=decodeURIComponent(c)),s in n?Array.isArray(n[s])?n[s].push(c):n[s]=[n[s],c]:n[s]=c}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}(l)),{hostname:o,port:s?parseInt(s):void 0,protocol:c,path:a,query:t}},useArnRegion:Ia(Na),utf8Decoder:function(e){var t=la(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},utf8Encoder:function(e){return fa(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}};var Ga,Ja,Xa;var Za={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"},Ya=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return co(t,void 0,void 0,(function(){var t,o,i,a,s;return fo(this,(function(u){return t=n.request,Eo.isInstance(t)&&(o=t.body,i=t.headers,o&&-1===Object.keys(i).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(a=e(o))&&(t.headers=so(so({},t.headers),((s={})["content-length"]=String(a),s)))),[2,r(so(so({},n),{request:t}))]}))}))}}}(e.bodyLengthChecker),Za)}}};var Qa={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"},es=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return co(t,void 0,void 0,(function(){var t;return fo(this,(function(o){return t=n.request,Eo.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=so(so({},t.headers),{Expect:"100-continue"})),[2,r(so(so({},n),{request:t}))]}))}))}}}(e),Qa)}}};var ts={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"]},rs=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(r){return co(void 0,void 0,void 0,(function(){var n,o;return fo(this,(function(i){return Eo.isInstance(r.request)?(n=r.request,(void 0===(o=(e.requestHandler.metadata||{}).handlerProtocol)?"":o).indexOf("h2")>=0&&!n.headers[":authority"]?(delete n.headers.host,n.headers[":authority"]=""):n.headers.host||(n.headers.host=n.hostname),[2,t(r)]):[2,t(r)]}))}))}}}(e),ts)}}},ns={name:"loggerMiddleware",tags:["LOGGER"],step:"build"},os=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(r){return co(void 0,void 0,void 0,(function(){var n,o,i;return fo(this,(function(a){switch(a.label){case 0:return n=t.logger,[4,e(r)];case 1:return o=a.sent(),n?(i=o.output.$metadata,"function"==typeof n.info&&n.info({$metadata:i}),[2,o]):[2,o]}}))}))}}),ns)}}};var is={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},as=function(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(r){return co(e,void 0,void 0,(function(){var e,n;return fo(this,(function(o){if("string"==typeof(e=r.input.Bucket)&&!va(e)&&e.indexOf("/")>=0)throw(n=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",n;return[2,t(so({},r))]}))}))}}}(),is)}}},ss={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware"},us=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(r){return co(void 0,void 0,void 0,(function(){var n,o;return fo(this,(function(i){switch(i.label){case 0:return n=r.request,!Eo.isInstance(n)||e.isCustomEndpoint?[2,t(so({},r))]:"s3.amazonaws.com"!==n.hostname?[3,1]:(n.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return o="aws-global",[4,e.region()];case 2:o===i.sent()&&(n.hostname="s3.amazonaws.com"),i.label=3;case 3:return[2,t(so({},r))]}}))}))}}}(e),ss)}}},cs="X-Amz-Date".toLowerCase(),fs=["authorization",cs,"date"],ls="X-Amz-Signature".toLowerCase(),ds="X-Amz-Security-Token".toLowerCase(),ps={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},hs=/^proxy-/,vs=/^sec-/,gs="AWS4-HMAC-SHA256-PAYLOAD",ys={},ms=[];function bs(e,t,r){return e+"/"+t+"/"+r+"/aws4_request"}function ws(e,t,r){var n,o,i=e.headers,a={};try{for(var s=lo(Object.keys(i).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,f=c.toLowerCase();(f in ps||(null==t?void 0:t.has(f))||hs.test(f)||vs.test(f))&&(!r||r&&!r.has(f))||(a[f]=i[c].trim().replace(/\s+/g," "))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return a}function Ss(e,t){var r=e.headers,n=e.body;return co(this,void 0,void 0,(function(){var e,o,i,a,s,u,c;return fo(this,(function(f){switch(f.label){case 0:try{for(e=lo(Object.keys(r)),o=e.next();!o.done;o=e.next())if("x-amz-content-sha256"===(i=o.value).toLowerCase())return[2,r[i]]}catch(e){u={error:e}}finally{try{o&&!o.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=n?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof n||ArrayBuffer.isView(n)||ca(n)?((a=new t).update(n),s=Hi,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[f.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function Es(e){var t=e.headers,r=e.query,n=uo(e,["headers","query"]);return so(so({},n),{headers:so({},t),query:r?xs(r):void 0})}function xs(e){return Object.keys(e).reduce((function(t,r){var n,o=e[r];return so(so({},t),((n={})[r]=Array.isArray(o)?ho(o):o,n))}),{})}function Cs(e){var t,r;e="function"==typeof e.clone?e.clone():Es(e);try{for(var n=lo(Object.keys(e.headers)),o=n.next();!o.done;o=n.next()){var i=o.value;fs.indexOf(i.toLowerCase())>-1&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return e}function As(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var Ts=function(){function e(e){var t=e.applyChecksum,r=e.credentials,n=e.region,o=e.service,i=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=o,this.sha256=i,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=ks(n),this.credentialProvider=js(r)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),co(this,void 0,void 0,(function(){var r,n,o,i,a,s,u,c,f,l,d,p,h,v,g,y,m,b,w,S,E,x,C;return fo(this,(function(A){switch(A.label){case 0:return r=t.signingDate,n=void 0===r?new Date:r,o=t.expiresIn,i=void 0===o?3600:o,a=t.unsignableHeaders,s=t.signableHeaders,u=t.signingRegion,c=t.signingService,[4,this.credentialProvider()];case 1:return f=A.sent(),null==u?[3,2]:(d=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:d=A.sent(),A.label=4;case 4:return l=d,p=Ls(n),h=p.longDate,v=p.shortDate,i>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=bs(v,l,null!=c?c:this.service),y=function(e){var t,r,n="function"==typeof e.clone?e.clone():Es(e),o=n.headers,i=n.query,a=void 0===i?{}:i;try{for(var s=lo(Object.keys(o)),u=s.next();!u.done;u=s.next()){var c=u.value;"x-amz-"===c.toLowerCase().substr(0,6)&&(a[c]=o[c],delete o[c])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return so(so({},e),{headers:o,query:a})}(Cs(e)),f.sessionToken&&(y.query["X-Amz-Security-Token"]=f.sessionToken),y.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",y.query["X-Amz-Credential"]=f.accessKeyId+"/"+g,y.query["X-Amz-Date"]=h,y.query["X-Amz-Expires"]=i.toString(10),m=ws(y,a,s),y.query["X-Amz-SignedHeaders"]=Os(m),b=y.query,w="X-Amz-Signature",S=this.getSignature,E=[h,g,this.getSigningKey(f,l,v,c)],x=this.createCanonicalRequest,C=[y,m],[4,Ss(e,this.sha256)]);case 5:return[4,S.apply(this,E.concat([x.apply(this,C.concat([A.sent()]))]))];case 6:return b[w]=A.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return co(this,void 0,void 0,(function(){return fo(this,(function(r){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var r=e.headers,n=e.payload,o=t.signingDate,i=void 0===o?new Date:o,a=t.priorSignature,s=t.signingRegion,u=t.signingService;return co(this,void 0,void 0,(function(){var e,t,o,c,f,l,d,p,h,v,g;return fo(this,(function(y){switch(y.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=y.sent(),y.label=3;case 3:return e=t,o=Ls(i),c=o.shortDate,f=o.longDate,l=bs(c,e,null!=u?u:this.service),[4,Ss({headers:{},body:n},this.sha256)];case 4:return d=y.sent(),(p=new this.sha256).update(r),v=Hi,[4,p.digest()];case 5:return h=v.apply(void 0,[y.sent()]),g=[gs,f,l,a,h,d].join("\n"),[2,this.signString(g,{signingDate:i,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var r=void 0===t?{}:t,n=r.signingDate,o=void 0===n?new Date:n,i=r.signingRegion,a=r.signingService;return co(this,void 0,void 0,(function(){var t,r,n,s,u,c,f,l;return fo(this,(function(d){switch(d.label){case 0:return[4,this.credentialProvider()];case 1:return t=d.sent(),null==i?[3,2]:(n=i,[3,4]);case 2:return[4,this.regionProvider()];case 3:n=d.sent(),d.label=4;case 4:return r=n,s=Ls(o).shortDate,f=(c=this.sha256).bind,[4,this.getSigningKey(t,r,s,a)];case 5:return(u=new(f.apply(c,[void 0,d.sent()]))).update(e),l=Hi,[4,u.digest()];case 6:return[2,l.apply(void 0,[d.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var r=void 0===t?{}:t,n=r.signingDate,o=void 0===n?new Date:n,i=r.signableHeaders,a=r.unsignableHeaders,s=r.signingRegion,u=r.signingService;return co(this,void 0,void 0,(function(){var t,r,n,c,f,l,d,p,h,v,g;return fo(this,(function(y){switch(y.label){case 0:return[4,this.credentialProvider()];case 1:return t=y.sent(),null==s?[3,2]:(n=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:n=y.sent(),y.label=4;case 4:return r=n,c=Cs(e),f=Ls(o),l=f.longDate,d=f.shortDate,p=bs(d,r,null!=u?u:this.service),c.headers[cs]=l,t.sessionToken&&(c.headers[ds]=t.sessionToken),[4,Ss(c,this.sha256)];case 5:return h=y.sent(),!function(e,t){var r,n;e=e.toLowerCase();try{for(var o=lo(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return!0}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=h),v=ws(c,a,i),[4,this.getSignature(l,p,this.getSigningKey(t,r,d,u),this.createCanonicalRequest(c,v,h))];case 6:return g=y.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+p+", SignedHeaders="+Os(v)+", Signature="+g,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,r){var n=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,r,n=e.query,o=void 0===n?{}:n,i=[],a={},s=function(e){if(e.toLowerCase()===ls)return"continue";i.push(e);var t=o[e];"string"==typeof t?a[e]=Ma(e)+"="+Ma(t):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,r){return t.concat([Ma(e)+"="+Ma(r)])}),[]).join("&"))};try{for(var u=lo(Object.keys(o).sort()),c=u.next();!c.done;c=u.next())s(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return i.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+n.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+n.join(";")+"\n"+r},e.prototype.createStringToSign=function(e,t,r){return co(this,void 0,void 0,(function(){var n,o;return fo(this,(function(i){switch(i.label){case 0:return(n=new this.sha256).update(r),[4,n.digest()];case 1:return o=i.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+Hi(o)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,r,n){return co(this,void 0,void 0,(function(){var o,i,a,s,u;return fo(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,n)];case 1:return o=c.sent(),s=(a=this.sha256).bind,[4,r];case 2:return(i=new(s.apply(a,[void 0,c.sent()]))).update(o),u=Hi,[4,i.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,r,n){return function(e,t,r,n,o){var i=r+":"+n+":"+o+":"+t.accessKeyId+":"+t.sessionToken;if(i in ys)return ys[i];for(ms.push(i);ms.length>50;)delete ys[ms.shift()];return ys[i]=new Promise((function(a,s){var u,c,f=Promise.resolve("AWS4"+t.secretAccessKey),l=function(t){(f=f.then((function(r){return n=t,(o=new e(r)).update(n),o.digest();var n,o}))).catch((function(){}))};try{for(var d=lo([r,n,o,"aws4_request"]),p=d.next();!p.done;p=d.next())l(p.value)}catch(e){u={error:e}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}f.then(a,(function(e){delete ys[i],s(e)}))}))}(this.sha256,e,r,t,n||this.service)},e}(),Ls=function(e){var t=As(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},Os=function(e){return Object.keys(e).sort().join(";")},ks=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},js=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function Ps(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var Rs=function(e){return new Date(Date.now()+e)};function Ns(e){return function(t,r){return function(n){return co(this,void 0,void 0,(function(){var o,i,a,s,u,c,f,l,d;return fo(this,(function(p){switch(p.label){case 0:return Eo.isInstance(n.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(n)];case 1:return i=p.sent(),[3,3];case 2:i=e.signer,p.label=3;case 3:return o=i,s=t,u=[so({},n)],d={},[4,o.sign(n.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:r.signing_region,signingService:r.signing_service})];case 4:return[4,s.apply(void 0,[so.apply(void 0,u.concat([(d.request=p.sent(),d)]))])];case 5:return a=p.sent(),c=a.response.headers,(f=c&&(c.date||c.Date))&&(l=Date.parse(f),h=l,v=e.systemClockOffset,Math.abs(Rs(v).getTime()-h)>=3e5&&(e.systemClockOffset=l-Date.now())),[2,a]}var h,v}))}))}}}var _s={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"};var Is={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},Ms=function(e){return{applyToStack:function(t){var r;t.add((r=e,function(e){return function(t){var n=t.request;if(!Eo.isInstance(n))return e(t);var o=n.headers,i="node"===r.runtime?"user-agent":"x-amz-user-agent";return o[i]?o[i]+=" "+r.defaultUserAgent:o[i]=""+r.defaultUserAgent,r.customUserAgent&&(o[i]+=" "+r.customUserAgent),e(so(so({},t),{request:n}))}}),Is)}}},Ds=function(){var e=[],t=[],r=new Set,n=function(r){return e.forEach((function(e){r.add(e.middleware,so({},e))})),t.forEach((function(e){r.addRelativeTo(e.middleware,so({},e))})),r},o=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,ho(o(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,ho(o(e)))})),t},i=function(){var r,n=[],i=[],a={};return e.forEach((function(e){var t=so(so({},e),{before:[],after:[]});t.name&&(a[t.name]=t),n.push(t)})),t.forEach((function(e){var t=so(so({},e),{before:[],after:[]});t.name&&(a[t.name]=t),i.push(t)})),i.forEach((function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(r=n,r.sort((function(e,t){return zs[t.step]-zs[e.step]||qs[t.priority||"normal"]-qs[e.priority||"normal"]}))).map(o).reduce((function(e,t){return e.push.apply(e,ho(t)),e}),[]).map((function(e){return e.middleware}))},a={add:function(t,n){void 0===n&&(n={});var o=n.name,i=so({step:"initialize",priority:"normal",middleware:t},n);if(o){if(r.has(o))throw new Error("Duplicate middleware name '"+o+"'");r.add(o)}e.push(i)},addRelativeTo:function(e,n){var o=n.name,i=so({middleware:e},n);if(o){if(r.has(o))throw new Error("Duplicated middleware name '"+o+"'");r.add(o)}t.push(i)},clone:function(){return n(Ds())},use:function(e){e.applyToStack(a)},remove:function(n){return"string"==typeof n?function(n){var o=!1,i=function(e){return!e.name||e.name!==n||(o=!0,r.delete(n),!1)};return e=e.filter(i),t=t.filter(i),o}(n):function(n){var o=!1,i=function(e){return e.middleware!==n||(o=!0,e.name&&r.delete(e.name),!1)};return e=e.filter(i),t=t.filter(i),o}(n)},removeByTag:function(n){var o=!1,i=function(e){var t=e.tags,i=e.name;return!t||!t.includes(n)||(i&&r.delete(i),o=!0,!1)};return e=e.filter(i),t=t.filter(i),o},concat:function(e){var t=n(Ds());return t.use(e),t},applyToStack:n,resolve:function(e,t){var r,n;try{for(var o=lo(i().reverse()),a=o.next();!a.done;a=o.next()){e=(0,a.value)(e,t)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e}};return a},zs={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},qs={high:3,normal:2,low:1},Bs=function(){function e(e){this.middlewareStack=Ds(),this.config=e}return e.prototype.send=function(e,t,r){var n="function"!=typeof t?t:void 0,o="function"==typeof t?t:r,i=e.resolveMiddleware(this.middlewareStack,this.config,n);if(!o)return i(e).then((function(e){return e.output}));i(e).then((function(e){return o(null,e.output)}),(function(e){return o(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Us=function(){this.middlewareStack=Ds()};function $s(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var Ks=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=Ks(e[t]));return e},Fs=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,ho([null],arguments)),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Fs.prototype=Object.create(String.prototype,{constructor:{value:Fs,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Fs,String);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ao(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(Fs);var Hs=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Vs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ws(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),i=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds();return Hs[n]+", "+(o<10?"0"+o:""+o)+" "+Vs[r]+" "+t+" "+(i<10?"0"+i:""+i)+":"+(a<10?"0"+a:""+a)+":"+(s<10?"0"+s:""+s)+" GMT"}var Gs="***SensitiveInformation***";var Js,Xs,Zs,Ys,Qs,eu,tu,ru,nu,ou,iu,au,su,uu,cu,fu,lu,du,pu,hu,vu,gu,yu,mu,bu,wu,Su,Eu,xu,Cu,Au,Tu,Lu,Ou,ku,ju,Pu,Ru,Nu,_u,Iu,Mu,Du,zu,qu,Bu,Uu,$u,Ku,Fu,Hu,Vu,Wu,Gu,Ju,Xu,Zu,Yu,Qu,ec,tc,rc,nc,oc,ic,ac,sc,uc,cc,fc,lc,dc,pc,hc,vc,gc,yc,mc,bc,wc,Sc,Ec,xc,Cc,Ac,Tc,Lc,Oc,kc,jc,Pc,Rc,Nc,_c,Ic,Mc,Dc,zc,qc,Bc,Uc,$c,Kc,Fc,Hc,Vc,Wc,Gc,Jc,Xc,Zc,Yc,Qc,ef,tf,rf,nf,of,af,sf,uf,cf,ff,lf,df,pf,hf,vf,gf,yf,mf,bf,wf,Sf,Ef,xf,Cf,Af,Tf,Lf,Of,kf,jf,Pf,Rf,Nf,_f,If,Mf,Df,zf,qf,Bf,Uf,$f,Kf,Ff,Hf,Vf,Wf,Gf,Jf,Xf,Zf,Yf,Qf,el,tl,rl,nl,ol,il,al,sl,ul,cl,fl,ll,dl,pl,hl,vl,gl,yl,ml,bl,wl,Sl,El,xl,Cl,Al,Tl,Ll,Ol,kl,jl,Pl,Rl,Nl,_l,Il,Ml,Dl,zl,ql,Bl,Ul,$l,Kl,Fl,Hl,Vl,Wl,Gl,Jl,Xl,Zl,Yl,Ql,ed,td,rd,nd,od,id,ad,sd,ud,cd,fd,ld,dd,pd,hd,vd,gd,yd,md,bd,wd,Sd,Ed,xd,Cd,Ad,Td,Ld,Od,kd,jd,Pd,Rd,Nd=Object.freeze({__proto__:null,S3Client:class extends Bs{constructor(e){let t=function(e){if(!e.region)throw new Error("Region is missing");return so(so({},e),{region:Qo(e.region)})}({...Wa,...e});var r,n;let o=function(e){var t,r=this,n=Ps(e.credentials||e.credentialDefaultProvider(e)),o=e.signingEscapePath,i=void 0===o||o,a=e.systemClockOffset,s=void 0===a?e.systemClockOffset||0:a,u=e.sha256;return t=e.signer?Ps(e.signer):function(){return Ps(e.region)().then((function(t){return co(r,void 0,void 0,(function(){return fo(this,(function(r){switch(r.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[r.sent()||{},t]]}}))}))})).then((function(t){var r=po(t,2),o=r[0],a=r[1],s=o.signingRegion,c=void 0===s?e.signingRegion:s,f=o.signingService,l=void 0===f?e.signingName:f;return e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||l,new Ts({credentials:n,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:i})}))},so(so({},e),{systemClockOffset:s,signingEscapePath:i,credentials:n,signer:t})}(so(so({},r=t),{tls:null===(n=r.tls)||void 0===n||n,endpoint:r.endpoint?Xo(r):function(){return Zo(r)},isCustomEndpoint:!!r.endpoint})),i=function(e){return so(so({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(function(e){var t=e.bucketEndpoint,r=void 0!==t&&t,n=e.forcePathStyle,o=void 0!==n&&n,i=e.useAccelerateEndpoint,a=void 0!==i&&i,s=e.useDualstackEndpoint,u=void 0!==s&&s,c=e.useArnRegion,f=void 0!==c&&c;return so(so({},e),{bucketEndpoint:r,forcePathStyle:o,useAccelerateEndpoint:a,useDualstackEndpoint:u,useArnRegion:"function"==typeof f?f:function(){return Promise.resolve(f)}})}(Fo(o)));var a;super(i),this.config=i,this.middlewareStack.use((a=this.config,{applyToStack:function(e){e.addRelativeTo(Ns(a),_s)}})),this.middlewareStack.use(wo(this.config)),this.middlewareStack.use(Ms(this.config)),this.middlewareStack.use(Ya(this.config)),this.middlewareStack.use(as(this.config)),this.middlewareStack.use(us(this.config)),this.middlewareStack.use(es(this.config)),this.middlewareStack.use(rs(this.config)),this.middlewareStack.use(os(this.config))}destroy(){super.destroy()}}});!function(e){e.filterSensitiveLog=e=>({...e})}(Js||(Js={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xs||(Xs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zs||(Zs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ys||(Ys={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qs||(Qs={})),function(e){e.filterSensitiveLog=e=>({...e})}(eu||(eu={})),function(e){e.filterSensitiveLog=e=>({...e})}(tu||(tu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ru||(ru={})),function(e){e.filterSensitiveLog=e=>({...e})}(nu||(nu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ou||(ou={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(iu||(iu={})),function(e){e.filterSensitiveLog=e=>({...e})}(au||(au={})),function(e){e.filterSensitiveLog=e=>({...e})}(su||(su={})),function(e){e.filterSensitiveLog=e=>({...e})}(uu||(uu={})),function(e){e.filterSensitiveLog=e=>({...e})}(cu||(cu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Gs},...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(fu||(fu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Gs},...e.SSECustomerKey&&{SSECustomerKey:Gs},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Gs},...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(lu||(lu={})),function(e){e.filterSensitiveLog=e=>({...e})}(du||(du={})),function(e){e.filterSensitiveLog=e=>({...e})}(pu||(pu={})),function(e){e.filterSensitiveLog=e=>({...e})}(hu||(hu={})),function(e){e.filterSensitiveLog=e=>({...e})}(vu||(vu={})),function(e){e.filterSensitiveLog=e=>({...e})}(gu||(gu={})),function(e){e.filterSensitiveLog=e=>({...e})}(yu||(yu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Gs},...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(mu||(mu={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Gs},...e.SSECustomerKey&&{SSECustomerKey:Gs}})}(bu||(bu={})),function(e){e.filterSensitiveLog=e=>({...e})}(wu||(wu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Su||(Su={})),function(e){e.filterSensitiveLog=e=>({...e})}(Eu||(Eu={})),function(e){e.filterSensitiveLog=e=>({...e})}(xu||(xu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cu||(Cu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Au||(Au={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tu||(Tu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lu||(Lu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ou||(Ou={})),function(e){e.filterSensitiveLog=e=>({...e})}(ku||(ku={})),function(e){e.filterSensitiveLog=e=>({...e})}(ju||(ju={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pu||(Pu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ru||(Ru={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nu||(Nu={})),function(e){e.filterSensitiveLog=e=>({...e})}(_u||(_u={})),function(e){e.filterSensitiveLog=e=>({...e})}(Iu||(Iu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mu||(Mu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Du||(Du={})),function(e){e.filterSensitiveLog=e=>({...e})}(zu||(zu={})),function(e){e.filterSensitiveLog=e=>({...e})}(qu||(qu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bu||(Bu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uu||(Uu={})),function(e){e.filterSensitiveLog=e=>({...e})}($u||($u={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ku||(Ku={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fu||(Fu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hu||(Hu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vu||(Vu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wu||(Wu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gu||(Gu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ju||(Ju={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xu||(Xu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zu||(Zu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yu||(Yu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qu||(Qu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ec||(ec={})),function(e){e.filterSensitiveLog=e=>({...e})}(tc||(tc={})),function(e){e.filterSensitiveLog=e=>({...e})}(rc||(rc={})),function(e){e.filterSensitiveLog=e=>({...e})}(nc||(nc={})),function(e){e.filterSensitiveLog=e=>({...e})}(oc||(oc={})),function(e){e.filterSensitiveLog=e=>({...e})}(ic||(ic={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KMSMasterKeyID&&{KMSMasterKeyID:Gs}})}(ac||(ac={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:ac.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)}})}(sc||(sc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>sc.filterSensitiveLog(e)))}})}(uc||(uc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:uc.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(cc||(cc={})),function(e){e.filterSensitiveLog=e=>({...e})}(fc||(fc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KeyId&&{KeyId:Gs}})}(lc||(lc={})),function(e){e.filterSensitiveLog=e=>({...e})}(dc||(dc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMS&&{SSEKMS:lc.filterSensitiveLog(e.SSEKMS)}})}(pc||(pc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Encryption&&{Encryption:pc.filterSensitiveLog(e.Encryption)}})}(hc||(hc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.S3BucketDestination&&{S3BucketDestination:hc.filterSensitiveLog(e.S3BucketDestination)}})}(vc||(vc={})),function(e){e.filterSensitiveLog=e=>({...e})}(gc||(gc={})),function(e){e.filterSensitiveLog=e=>({...e})}(yc||(yc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Destination&&{Destination:vc.filterSensitiveLog(e.Destination)}})}(mc||(mc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:mc.filterSensitiveLog(e.InventoryConfiguration)}})}(bc||(bc={})),function(e){e.filterSensitiveLog=e=>({...e})}(wc||(wc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sc||(Sc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ec||(Ec={})),function(e){e.filterSensitiveLog=e=>({...e})}(xc||(xc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cc||(Cc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ac||(Ac={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tc||(Tc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lc||(Lc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Oc||(Oc={})),function(e){e.filterSensitiveLog=e=>({...e})}(kc||(kc={})),function(e){e.filterSensitiveLog=e=>({...e})}(jc||(jc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pc||(Pc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rc||(Rc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nc||(Nc={})),function(e){e.filterSensitiveLog=e=>({...e})}(_c||(_c={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ic||(Ic={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mc||(Mc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Dc||(Dc={})),function(e){e.filterSensitiveLog=e=>({...e})}(zc||(zc={})),function(e){e.filterSensitiveLog=e=>({...e})}(qc||(qc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bc||(Bc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uc||(Uc={})),function(e){e.filterSensitiveLog=e=>({...e})}($c||($c={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kc||(Kc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fc||(Fc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hc||(Hc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vc||(Vc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wc||(Wc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gc||(Gc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jc||(Jc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xc||(Xc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zc||(Zc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yc||(Yc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qc||(Qc={})),function(e){e.filterSensitiveLog=e=>({...e})}(ef||(ef={})),function(e){e.filterSensitiveLog=e=>({...e})}(tf||(tf={})),function(e){e.filterSensitiveLog=e=>({...e})}(rf||(rf={})),function(e){e.filterSensitiveLog=e=>({...e})}(nf||(nf={})),function(e){e.filterSensitiveLog=e=>({...e})}(of||(of={})),function(e){e.filterSensitiveLog=e=>({...e})}(af||(af={})),function(e){e.filterSensitiveLog=e=>({...e})}(sf||(sf={})),function(e){e.filterSensitiveLog=e=>({...e})}(uf||(uf={})),function(e){e.filterSensitiveLog=e=>({...e})}(cf||(cf={})),function(e){e.filterSensitiveLog=e=>({...e})}(ff||(ff={})),function(e){e.filterSensitiveLog=e=>({...e})}(lf||(lf={})),function(e){e.filterSensitiveLog=e=>({...e})}(df||(df={})),function(e){e.filterSensitiveLog=e=>({...e})}(pf||(pf={})),function(e){e.filterSensitiveLog=e=>({...e})}(hf||(hf={})),function(e){e.filterSensitiveLog=e=>({...e})}(vf||(vf={})),function(e){e.filterSensitiveLog=e=>({...e})}(gf||(gf={})),function(e){e.filterSensitiveLog=e=>({...e})}(yf||(yf={})),function(e){e.filterSensitiveLog=e=>({...e})}(mf||(mf={})),function(e){e.filterSensitiveLog=e=>({...e})}(bf||(bf={})),function(e){e.filterSensitiveLog=e=>({...e})}(wf||(wf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sf||(Sf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ef||(Ef={})),function(e){e.filterSensitiveLog=e=>({...e})}(xf||(xf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cf||(Cf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Af||(Af={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tf||(Tf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lf||(Lf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Of||(Of={})),function(e){e.filterSensitiveLog=e=>({...e})}(kf||(kf={})),function(e){e.filterSensitiveLog=e=>({...e})}(jf||(jf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pf||(Pf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rf||(Rf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nf||(Nf={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(_f||(_f={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Gs}})}(If||(If={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mf||(Mf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Df||(Df={})),function(e){e.filterSensitiveLog=e=>({...e})}(zf||(zf={})),function(e){e.filterSensitiveLog=e=>({...e})}(qf||(qf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bf||(Bf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uf||(Uf={})),function(e){e.filterSensitiveLog=e=>({...e})}($f||($f={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kf||(Kf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ff||(Ff={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hf||(Hf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vf||(Vf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wf||(Wf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gf||(Gf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jf||(Jf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xf||(Xf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zf||(Zf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yf||(Yf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qf||(Qf={})),function(e){e.filterSensitiveLog=e=>({...e})}(el||(el={})),function(e){e.filterSensitiveLog=e=>({...e})}(tl||(tl={})),function(e){e.filterSensitiveLog=e=>({...e})}(rl||(rl={})),function(e){e.filterSensitiveLog=e=>({...e})}(nl||(nl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ol||(ol={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(il||(il={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Gs}})}(al||(al={})),function(e){e.filterSensitiveLog=e=>({...e})}(sl||(sl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ul||(ul={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((e=>mc.filterSensitiveLog(e)))}})}(cl||(cl={})),function(e){e.filterSensitiveLog=e=>({...e})}(fl||(fl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ll||(ll={})),function(e){e.filterSensitiveLog=e=>({...e})}(dl||(dl={})),function(e){e.filterSensitiveLog=e=>({...e})}(pl||(pl={})),function(e){e.filterSensitiveLog=e=>({...e})}(hl||(hl={})),function(e){e.filterSensitiveLog=e=>({...e})}(vl||(vl={})),function(e){e.filterSensitiveLog=e=>({...e})}(gl||(gl={})),function(e){e.filterSensitiveLog=e=>({...e})}(yl||(yl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ml||(ml={})),function(e){e.filterSensitiveLog=e=>({...e})}(bl||(bl={})),function(e){e.filterSensitiveLog=e=>({...e})}(wl||(wl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sl||(Sl={})),function(e){e.filterSensitiveLog=e=>({...e})}(El||(El={})),function(e){e.filterSensitiveLog=e=>({...e})}(xl||(xl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cl||(Cl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Al||(Al={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tl||(Tl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ll||(Ll={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ol||(Ol={})),function(e){e.filterSensitiveLog=e=>({...e})}(kl||(kl={})),function(e){e.filterSensitiveLog=e=>({...e})}(jl||(jl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pl||(Pl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rl||(Rl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nl||(Nl={})),function(e){e.filterSensitiveLog=e=>({...e})}(_l||(_l={})),function(e){e.filterSensitiveLog=e=>({...e})}(Il||(Il={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ml||(Ml={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:uc.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(Dl||(Dl={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:mc.filterSensitiveLog(e.InventoryConfiguration)}})}(zl||(zl={})),function(e){e.filterSensitiveLog=e=>({...e})}(ql||(ql={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bl||(Bl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ul||(Ul={})),function(e){e.filterSensitiveLog=e=>({...e})}($l||($l={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kl||(Kl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fl||(Fl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hl||(Hl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vl||(Vl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wl||(Wl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gl||(Gl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jl||(Jl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xl||(Xl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zl||(Zl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yl||(Yl={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ql||(Ql={})),function(e){e.filterSensitiveLog=e=>({...e})}(ed||(ed={})),function(e){e.filterSensitiveLog=e=>({...e})}(td||(td={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Gs},...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(rd||(rd={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Gs},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Gs},...e.SSEKMSKeyId&&{SSEKMSKeyId:Gs}})}(nd||(nd={})),function(e){e.filterSensitiveLog=e=>({...e})}(od||(od={})),function(e){e.filterSensitiveLog=e=>({...e})}(id||(id={})),function(e){e.filterSensitiveLog=e=>({...e})}(ad||(ad={})),function(e){e.filterSensitiveLog=e=>({...e})}(sd||(sd={})),function(e){e.filterSensitiveLog=e=>({...e})}(ud||(ud={})),function(e){e.filterSensitiveLog=e=>({...e})}(cd||(cd={})),function(e){e.filterSensitiveLog=e=>({...e})}(fd||(fd={})),function(e){e.filterSensitiveLog=e=>({...e})}(ld||(ld={})),function(e){e.filterSensitiveLog=e=>({...e})}(dd||(dd={})),function(e){e.filterSensitiveLog=e=>({...e})}(pd||(pd={})),function(e){e.filterSensitiveLog=e=>({...e})}(hd||(hd={})),function(e){e.filterSensitiveLog=e=>({...e})}(vd||(vd={})),function(e){e.filterSensitiveLog=e=>({...e})}(gd||(gd={})),function(e){e.filterSensitiveLog=e=>({...e})}(yd||(yd={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KMSKeyId&&{KMSKeyId:Gs}})}(md||(md={})),function(e){e.filterSensitiveLog=e=>({...e})}(bd||(bd={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Encryption&&{Encryption:md.filterSensitiveLog(e.Encryption)}})}(wd||(wd={})),function(e){e.filterSensitiveLog=e=>({...e,...e.S3&&{S3:wd.filterSensitiveLog(e.S3)}})}(Sd||(Sd={})),function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(Ed||(Ed={})),function(e){e.filterSensitiveLog=e=>({...e})}(xd||(xd={})),function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(Cd||(Cd={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ad||(Ad={})),function(e){e.filterSensitiveLog=e=>({...e})}(Td||(Td={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ld||(Ld={})),function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(Od||(Od={})),function(e){e.filterSensitiveLog=e=>({...e})}(kd||(kd={})),function(e){e.filterSensitiveLog=e=>({...e})}(jd||(jd={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pd||(Pd={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rd||(Rd={}));var _d=V((function(e,t){const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t){const n=Object.keys(t),o=n.length;for(let i=0;i<o;i++)e[n[i]]="strict"===r?[t[n[i]]]:t[n[i]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,r){var n={};if(!e)return t;for(let o=0;o<r.length;o++)void 0!==e[r[o]]?n[r[o]]=e[r[o]]:n[r[o]]=t[r[o]];return n},t.isName=function(e){const t=o.exec(e);return!(null==t)},t.getAllMatches=function(e,t){const r=[];let n=t.exec(e);for(;n;){const o=[],i=n.length;for(let e=0;e<i;e++)o.push(n[e]);r.push(o),n=t.exec(e)}return r},t.nameRegexp=n}));const Id=function(e,t){const r={};if(!(e.child&&!_d.isEmptyObject(e.child)||e.attrsMap&&!_d.isEmptyObject(e.attrsMap)))return _d.isExist(e.val)?e.val:"";_d.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&("strict"===t.arrayMode?r[t.textNodeName]=[e.val]:r[t.textNodeName]=e.val),_d.merge(r,e.attrsMap,t.arrayMode);const n=Object.keys(e.child);for(let a=0;a<n.length;a++){var o=n[a];if(e.child[o]&&e.child[o].length>1)for(var i in r[o]=[],e.child[o])r[o].push(Id(e.child[o][i],t));else if(!0===t.arrayMode){const n=Id(e.child[o][0],t);r[o]="object"==typeof n?[n]:n}else"strict"===t.arrayMode?r[o]=[Id(e.child[o][0],t)]:r[o]=Id(e.child[o][0],t)}return r};var Md={convertToJson:Id},Dd=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}};const zd=_d.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,_d.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const qd={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};var Bd=qd;const Ud=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var $d=Ud;function Kd(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=Hd(t=r.tagValueProcessor(t,e),r.parseNodeValue,r.parseTrueNumberOnly)),t}function Fd(e,t){if(t.ignoreNameSpace){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}function Hd(e,t,r){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),r&&(t=String(t)===e?t:e)),t}return _d.isExist(e)?e:""}const Vd=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function Wd(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const r=_d.getAllMatches(e,Vd),n=r.length,o={};for(let e=0;e<n;e++){const n=Fd(r[e][1],t);n.length&&(void 0!==r[e][4]?(t.trimValues&&(r[e][4]=r[e][4].trim()),r[e][4]=t.attrValueProcessor(r[e][4],n),o[t.attributeNamePrefix+n]=Hd(r[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(o[t.attributeNamePrefix+n]=!0))}if(!Object.keys(o).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=o,e}return o}}function Gd(e,t){let r,n="";for(let o=t;o<e.length;o++){let t=e[o];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else{if(">"===t)return{data:n,index:o};"\t"===t&&(t=" ")}n+=t}}function Jd(e,t,r,n){const o=e.indexOf(t,r);if(-1===o)throw new Error(n);return o+t.length-1}var Xd={defaultOptions:Bd,props:$d,getTraversalObj:function(e,t){e=e.replace(/(\r\n)|\n/," "),t=zd(t,qd,Ud);const r=new Dd("!xml");let n=r,o="";for(let r=0;r<e.length;r++){if("<"===e[r])if("/"===e[r+1]){const i=Jd(e,">",r,"Closing Tag is not closed.");let a=e.substring(r+2,i).trim();if(t.ignoreNameSpace){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}n&&(n.val?n.val=_d.getValue(n.val)+""+Kd(a,o,t):n.val=Kd(a,o,t)),t.stopNodes.length&&t.stopNodes.includes(n.tagname)&&(n.child=[],null==n.attrsMap&&(n.attrsMap={}),n.val=e.substr(n.startIndex+1,r-n.startIndex-1)),n=n.parent,o="",r=i}else if("?"===e[r+1])r=Jd(e,"?>",r,"Pi Tag is not closed.");else if("!--"===e.substr(r+1,3))r=Jd(e,"--\x3e",r,"Comment is not closed.");else if("!D"===e.substr(r+1,2)){const t=Jd(e,">",r,"DOCTYPE is not closed.");r=e.substring(r,t).indexOf("[")>=0?e.indexOf("]>",r)+1:t}else if("!["===e.substr(r+1,2)){const i=Jd(e,"]]>",r,"CDATA is not closed.")-2,a=e.substring(r+9,i);if(o&&(n.val=_d.getValue(n.val)+""+Kd(n.tagname,o,t),o=""),t.cdataTagName){const e=new Dd(t.cdataTagName,n,a);n.addChild(e),n.val=_d.getValue(n.val)+t.cdataPositionChar,a&&(e.val=a)}else n.val=(n.val||"")+(a||"");r=i+2}else{const i=Gd(e,r+1);let a=i.data;const s=i.index,u=a.indexOf(" ");let c=a;if(-1!==u&&(c=a.substr(0,u).trimRight(),a=a.substr(u+1)),t.ignoreNameSpace){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1))}if(n&&o&&"!xml"!==n.tagname&&(n.val=_d.getValue(n.val)+""+Kd(n.tagname,o,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),a=c):a=a.substr(0,a.length-1);const e=new Dd(c,n,"");c!==a&&(e.attrsMap=Wd(a,t)),n.addChild(e)}else{const e=new Dd(c,n);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=s),c!==a&&(e.attrsMap=Wd(a,t)),n.addChild(e),n=e}o="",r=s}else o+=e[r]}return r}};const Zd={allowBooleanAttributes:!1},Yd=["allowBooleanAttributes"];function Qd(e,t){for(var r=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var n=e.substr(r,t-r);if(t>5&&"xml"===n)return ip("InvalidXml","XML declaration allowed only at the start of the document.",sp(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function ep(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function tp(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===n)n=e[t];else{if(n!==e[t])continue;n=""}else if(">"===e[t]&&""===n){o=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:o}}const rp=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function np(e,t){const r=_d.getAllMatches(e,rp),n={};for(let o=0;o<r.length;o++){if(0===r[o][1].length)return ip("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",up(e,r[o][0]));if(void 0===r[o][3]&&!t.allowBooleanAttributes)return ip("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",up(e,r[o][0]));const i=r[o][2];if(!ap(i))return ip("InvalidAttr","Attribute '"+i+"' is an invalid name.",up(e,r[o][0]));if(n.hasOwnProperty(i))return ip("InvalidAttr","Attribute '"+i+"' is repeated.",up(e,r[o][0]));n[i]=1}return!0}function op(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function ip(e,t,r){return{err:{code:e,msg:t,line:r}}}function ap(e){return _d.isName(e)}function sp(e,t){return e.substring(0,t).split(/\r?\n/).length}function up(e,t){return e.indexOf(t)+t.length}var cp=function(e,t){t=_d.buildOptions(t,Zd,Yd);const r=[];let n=!1,o=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let a=0;a<e.length;a++){if("<"!==e[a]){if(" "===e[a]||"\t"===e[a]||"\n"===e[a]||"\r"===e[a])continue;return ip("InvalidChar","char '"+e[a]+"' is not expected.",sp(e,a))}if(a++,"?"===e[a]){if(a=Qd(e,++a),a.err)return a}else{if("!"===e[a]){a=ep(e,a);continue}{let s=!1;"/"===e[a]&&(s=!0,a++);let u="";for(;a<e.length&&">"!==e[a]&&" "!==e[a]&&"\t"!==e[a]&&"\n"!==e[a]&&"\r"!==e[a];a++)u+=e[a];if(u=u.trim(),"/"===u[u.length-1]&&(u=u.substring(0,u.length-1),a--),i=u,!_d.isName(i)){let t;return t=0===u.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+u+"' is an invalid name.",ip("InvalidTag",t,sp(e,a))}const c=tp(e,a);if(!1===c)return ip("InvalidAttr","Attributes for '"+u+"' have open quote.",sp(e,a));let f=c.value;if(a=c.index,"/"===f[f.length-1]){f=f.substring(0,f.length-1);const r=np(f,t);if(!0!==r)return ip(r.err.code,r.err.msg,sp(e,a-f.length+r.err.line));n=!0}else if(s){if(!c.tagClosed)return ip("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",sp(e,a));if(f.trim().length>0)return ip("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",sp(e,a));{const t=r.pop();if(u!==t)return ip("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+u+"'.",sp(e,a));0==r.length&&(o=!0)}}else{const i=np(f,t);if(!0!==i)return ip(i.err.code,i.err.msg,sp(e,a-f.length+i.err.line));if(!0===o)return ip("InvalidXml","Multiple possible root nodes found.",sp(e,a));r.push(u),n=!0}for(a++;a<e.length;a++){if("<"===e[a]){if("!"===e[a+1]){a++,a=ep(e,a);continue}break}if("&"===e[a]){const t=op(e,a);if(-1==t)return ip("InvalidChar","char '&' is not expected.",sp(e,a));a=t}}"<"===e[a]&&a--}}}var i;return n?!(r.length>0)||ip("InvalidXml","Invalid '"+JSON.stringify(r,null,4).replace(/\r?\n/g,"")+"' found.",1):ip("InvalidXml","Start tag expected.",1)};const fp=function(e){return String.fromCharCode(e)},lp={nilChar:fp(176),missingChar:fp(201),nilPremitive:fp(175),missingPremitive:fp(200),emptyChar:fp(178),emptyValue:fp(177),boundryChar:fp(179),objStart:fp(198),arrStart:fp(204),arrayEnd:fp(185)},dp=[lp.nilChar,lp.nilPremitive,lp.missingChar,lp.missingPremitive,lp.boundryChar,lp.emptyChar,lp.emptyValue,lp.arrayEnd,lp.objStart,lp.arrStart],pp=function(e,t,r){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?hp(e[0].val):hp(e);{const o=void 0===(n=e)?lp.missingChar:null===n?lp.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||lp.emptyChar;if(!0===o){let n="";if(Array.isArray(t)){n+=lp.arrStart;const o=t[0],i=e.length;if("string"==typeof o)for(let t=0;t<i;t++){const r=hp(e[t].val);n=vp(n,r)}else for(let t=0;t<i;t++){const i=pp(e[t],o,r);n=vp(n,i)}n+=lp.arrayEnd}else{n+=lp.objStart;const o=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let i in o){const a=o[i];let s;s=!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?pp(e.attrsMap[a],t[a],r):a===r.textNodeName?pp(e.val,t[a],r):pp(e.child[a],t[a],r),n=vp(n,s)}}return n}return o}var n},hp=function(e){switch(e){case void 0:return lp.missingPremitive;case null:return lp.nilPremitive;case"":return lp.emptyValue;default:return e}},vp=function(e,t){return gp(t[0])||gp(e[e.length-1])||(e+=lp.boundryChar),e+t},gp=function(e){return-1!==dp.indexOf(e)};const yp=_d.buildOptions;var mp={convert2nimn:function(e,t,r){return r=yp(r,Xd.defaultOptions,Xd.props),pp(e,t,r)}};const bp=_d.buildOptions,wp=function(e,t,r){let n="{";const o=Object.keys(e.child);for(let r=0;r<o.length;r++){var i=o[r];if(e.child[i]&&e.child[i].length>1){for(var a in n+='"'+i+'" : [ ',e.child[i])n+=wp(e.child[i][a],t)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+i+'" : '+wp(e.child[i][0],t)+" ,"}return _d.merge(n,e.attrsMap),_d.isEmptyObject(n)?_d.isExist(e.val)?e.val:"":(_d.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(n+='"'+t.textNodeName+'" : '+(!0!==(s=e.val)&&!1!==s&&isNaN(s)?'"'+s+'"':s)),","===n[n.length-1]&&(n=n.substr(0,n.length-2)),n+"}");var s};var Sp={convertToJsonString:function(e,t){return(t=bp(t,Xd.defaultOptions,Xd.props)).indentBy=t.indentBy||"",wp(e,t)}};const Ep=_d.buildOptions,xp={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},Cp=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function Ap(e){this.options=Ep(e,xp,Cp),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Np),this.options.cdataTagName?this.isCDATA=_p:this.isCDATA=function(){return!1},this.replaceCDATAstr=Tp,this.replaceCDATAarr=Lp,this.options.format?(this.indentate=Rp,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=Pp,this.buildObjNode=kp):(this.buildTextNode=jp,this.buildObjNode=Op),this.buildTextValNode=jp,this.buildObjectNode=Op}function Tp(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function Lp(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[r]+"]]>");return e+this.newLine}function Op(e,t,r,n){return r&&!e.includes("<")?this.indentate(n)+"<"+t+r+">"+e+"</"+t+this.tagEndChar:this.indentate(n)+"<"+t+r+this.tagEndChar+e+this.indentate(n)+"</"+t+this.tagEndChar}function kp(e,t,r,n){return""!==e?this.buildObjectNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function jp(e,t,r,n){return this.indentate(n)+"<"+t+r+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function Pp(e,t,r,n){return""!==e?this.buildTextValNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function Rp(e){return this.options.indentBy.repeat(e)}function Np(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function _p(e){return e===this.options.cdataTagName}Ap.prototype.parse=function(e){return this.j2x(e,0).val},Ap.prototype.j2x=function(e,t){let r="",n="";const o=Object.keys(e),i=o.length;for(let a=0;a<i;a++){const i=o[a];if(void 0===e[i]);else if(null===e[i])n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)n+=this.buildTextNode(e[i],i,"",t);else if("object"!=typeof e[i]){const o=this.isAttribute(i);o?r+=" "+o+'="'+this.options.attrValueProcessor(""+e[i])+'"':this.isCDATA(i)?e[this.options.textNodeName]?n+=this.replaceCDATAstr(e[this.options.textNodeName],e[i]):n+=this.replaceCDATAstr("",e[i]):i===this.options.textNodeName?e[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+e[i])):n+=this.buildTextNode(e[i],i,"",t)}else if(Array.isArray(e[i]))if(this.isCDATA(i))n+=this.indentate(t),e[this.options.textNodeName]?n+=this.replaceCDATAarr(e[this.options.textNodeName],e[i]):n+=this.replaceCDATAarr("",e[i]);else{const r=e[i].length;for(let o=0;o<r;o++){const r=e[i][o];if(void 0===r);else if(null===r)n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if("object"==typeof r){const e=this.j2x(r,t+1);n+=this.buildObjNode(e.val,i,e.attrStr,t)}else n+=this.buildTextNode(r,i,"",t)}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const t=Object.keys(e[i]),n=t.length;for(let o=0;o<n;o++)r+=" "+t[o]+'="'+this.options.attrValueProcessor(""+e[i][t[o]])+'"'}else{const r=this.j2x(e[i],t+1);n+=this.buildObjNode(r.val,i,r.attrStr,t)}}return{attrStr:r,val:n}};var Ip=Ap,Mp=V((function(e,t){const r=Xd,n=_d.buildOptions;t.parse=function(e,t,o){if(o){!0===o&&(o={});const t=cp(e,o);if(!0!==t)throw Error(t.err.msg)}t=n(t,r.defaultOptions,r.props);const i=Xd.getTraversalObj(e,t);return Md.convertToJson(i,t)},t.convertTonimn=mp.convert2nimn,t.getTraversalObj=Xd.getTraversalObj,t.convertToJson=Md.convertToJson,t.convertToJsonString=Sp.convertToJsonString,t.validate=cp,t.j2xParser=Ip,t.parseToNimn=function(e,r,n){return t.convertTonimn(t.getTraversalObj(e,n),r,n)}}));const Dp=async(e,t)=>{const r={...e,body:await Kp(e.body,t)};let n,o="UnknownError";switch(o=Fp(e,r.body),o){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":n={...await qp(r),name:o,$metadata:Bp(e)};break;default:const t=r.body;o=t.code||t.Code||o,n={...t,name:""+o,message:t.message||t.Message||o,$fault:"client",$metadata:Bp(e)}}const i=n.message||n.Message||o;return n.message=i,delete n.Message,Promise.reject(Object.assign(new Error(i),n))},zp=async(e,t)=>{const r={...e,body:await Kp(e.body,t)};let n,o="UnknownError";o=Fp(e,r.body);{const t=r.body;o=t.code||t.Code||o,n={...t,name:""+o,message:t.message||t.Message||o,$fault:"client",$metadata:Bp(e)}}const i=n.message||n.Message||o;return n.message=i,delete n.Message,Promise.reject(Object.assign(new Error(i),n))},qp=async(e,t)=>{const r={name:"NoSuchKey",$fault:"client",$metadata:Bp(e)};e.body;return r},Bp=e=>({httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}),Up=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),$p=e=>!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size),Kp=(e,t)=>((e,t)=>Up(e,t).then((e=>t.utf8Encoder(e))))(e,t).then((e=>{if(e.length){const t=Mp.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:(e,t)=>e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}),r="#text",n=Object.keys(t)[0],o=t[n];return o[r]&&(o[n]=o[r],delete o[r]),Ks(o)}return{}})),Fp=(e,t)=>void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":"";var Hp={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},Vp={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function Wp(e,t,r){return{applyToStack:function(n){n.add(function(e,t){return function(r,n){return function(o){return co(void 0,void 0,void 0,(function(){var i,a,s,u,c;return fo(this,(function(f){switch(f.label){case 0:return i=n.logger,a=n.outputFilterSensitiveLog,[4,r(o)];case 1:return s=f.sent().response,"function"==typeof(null==i?void 0:i.debug)&&i.debug({httpResponse:s}),[4,t(s,e)];case 2:return(u=f.sent()).$metadata,c=uo(u,["$metadata"]),"function"==typeof(null==i?void 0:i.info)&&i.info({output:a(c)}),[2,{response:s,output:u}]}}))}))}}}(e,r),Hp),n.add(function(e,t){return function(r,n){return function(o){return co(void 0,void 0,void 0,(function(){var i,a,s;return fo(this,(function(u){switch(u.label){case 0:return i=n.logger,a=n.inputFilterSensitiveLog,"function"==typeof(null==i?void 0:i.info)&&i.info({input:a(o.input)}),[4,t(o.input,e)];case 1:return s=u.sent(),"function"==typeof(null==i?void 0:i.debug)&&i.debug({httpRequest:s}),[2,r(so(so({},o),{request:s}))]}}))}))}}}(e,t),Vp)}}}var Gp={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},Jp=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return co(t,void 0,void 0,(function(){var t,o,i,a,s,u,c,f,l,d,p,h,v,g,y,m,b;return fo(this,(function(w){switch(w.label){case 0:t=so({},n.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),i=lo(o),a=i.next(),w.label=2;case 2:return a.done?[3,5]:(s=a.value,(u=t[s.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),f=e.base64Encoder(c),(l=new e.md5).update(c),d=[so({},t)],(b={})[s.target]=f,p=s.hash,v=(h=e).base64Encoder,[4,l.digest()]):[3,4]);case 3:t=so.apply(void 0,d.concat([(b[p]=v.apply(h,[w.sent()]),b)])),w.label=4;case 4:return a=i.next(),[3,2];case 5:return[3,8];case 6:return g=w.sent(),y={error:g},[3,8];case 7:try{a&&!a.done&&(m=i.return)&&m.call(i)}finally{if(y)throw y.error}return[7];case 8:return[2,r(so(so({},n),{input:t}))]}}))}))}}}(e),Gp)}}};var Xp=Object.freeze({__proto__:null,PutObjectCommand:class extends Us{constructor(e){super(),this.input=e}resolveMiddleware(e,t,r){this.middlewareStack.use(Wp(t,this.serialize,this.deserialize)),this.middlewareStack.use(Jp(t)),this.middlewareStack.use(Ra(t));const n=e.concat(this.middlewareStack),{logger:o}=t,i={logger:o,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:nd.filterSensitiveLog,outputFilterSensitiveLog:rd.filterSensitiveLog},{requestHandler:a}=t;return n.resolve((e=>a.handle(e.request,r||{})),i)}serialize(e,t){return(async(e,t)=>{const r={"Content-Type":"application/octet-stream",...$p(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl},...$p(e.ContentEncoding)&&{"Content-Encoding":e.ContentEncoding},...$p(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...$p(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP},...$p(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5},...$p(e.CacheControl)&&{"Cache-Control":e.CacheControl},...$p(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation},...$p(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus},...$p(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP},...$p(e.ContentLength)&&{"Content-Length":e.ContentLength.toString()},...$p(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()},...$p(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...$p(e.ContentDisposition)&&{"Content-Disposition":e.ContentDisposition},...$p(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...$p(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext},...$p(e.Tagging)&&{"x-amz-tagging":e.Tagging},...$p(e.Expires)&&{Expires:Ws(e.Expires).toString()},...$p(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass},...$p(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner},...$p(e.ContentMD5)&&{"Content-MD5":e.ContentMD5},...$p(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption},...$p(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode},...$p(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId},...$p(e.ContentLanguage)&&{"Content-Language":e.ContentLanguage},...$p(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead},...$p(e.ACL)&&{"x-amz-acl":e.ACL},...$p(e.ContentType)&&{"Content-Type":e.ContentType},...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,r)=>(t["x-amz-meta-"+r]=e.Metadata[r],t)),{})};let n,o,i="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const t=e.Bucket;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");i=i.replace("{Bucket}",$s(t))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const t=e.Key;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");i=i.replace("{Key+}",t.split("/").map((e=>$s(e))).join("/"))}void 0!==e.Body&&(o=e.Body,n=o);const{hostname:a,protocol:s="https",port:u}=await t.endpoint();return new Eo({protocol:s,hostname:a,port:u,method:"PUT",headers:r,path:i,query:{"x-id":"PutObject"},body:n})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return zp(e,t);const r={$metadata:Bp(e),ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0};return void 0!==e.headers["x-amz-server-side-encryption-context"]&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-expiration"]&&(r.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers.etag&&(r.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-version-id"]&&(r.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(r.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),await Up(e.body,t),Promise.resolve(r)})(e,t)}}});var Zp=Object.freeze({__proto__:null,GetObjectCommand:class extends Us{constructor(e){super(),this.input=e}resolveMiddleware(e,t,r){this.middlewareStack.use(Wp(t,this.serialize,this.deserialize)),this.middlewareStack.use(Jp(t)),this.middlewareStack.use(Ra(t));const n=e.concat(this.middlewareStack),{logger:o}=t,i={logger:o,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:If.filterSensitiveLog,outputFilterSensitiveLog:_f.filterSensitiveLog},{requestHandler:a}=t;return n.resolve((e=>a.handle(e.request,r||{})),i)}serialize(e,t){return(async(e,t)=>{const r={"Content-Type":"",...$p(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...$p(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...$p(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5},...$p(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...$p(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner},...$p(e.IfUnmodifiedSince)&&{"If-Unmodified-Since":Ws(e.IfUnmodifiedSince).toString()},...$p(e.IfModifiedSince)&&{"If-Modified-Since":Ws(e.IfModifiedSince).toString()},...$p(e.IfNoneMatch)&&{"If-None-Match":e.IfNoneMatch},...$p(e.IfMatch)&&{"If-Match":e.IfMatch},...$p(e.Range)&&{Range:e.Range}};let n="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const t=e.Bucket;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",$s(t))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const t=e.Key;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",t.split("/").map((e=>$s(e))).join("/"))}const o={"x-id":"GetObject",...void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding},...void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl},...void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage},...void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition},...void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()},...void 0!==e.VersionId&&{versionId:e.VersionId},...void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()},...void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}},{hostname:i,protocol:a="https",port:s}=await t.endpoint();return new Eo({protocol:a,hostname:i,port:s,method:"GET",headers:r,path:n,query:o,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Dp(e,t);const r={$metadata:Bp(e),AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0};void 0!==e.headers["x-amz-object-lock-mode"]&&(r.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["content-language"]&&(r.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-disposition"]&&(r.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["cache-control"]&&(r.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-type"]&&(r.ContentType=e.headers["content-type"]),void 0!==e.headers["content-range"]&&(r.ContentRange=e.headers["content-range"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["content-length"]&&(r.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(r.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(r.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),void 0!==e.headers["x-amz-delete-marker"]&&(r.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-storage-class"]&&(r.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["content-encoding"]&&(r.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["x-amz-restore"]&&(r.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["x-amz-website-redirect-location"]&&(r.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(r.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["accept-ranges"]&&(r.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-version-id"]&&(r.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers.expires&&(r.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-expiration"]&&(r.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-missing-meta"]&&(r.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-replication-status"]&&(r.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-tagging-count"]&&(r.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["last-modified"]&&(r.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers.etag&&(r.ETag=e.headers.etag),void 0!==e.headers["x-amz-request-charged"]&&(r.RequestCharged=e.headers["x-amz-request-charged"]),Object.keys(e.headers).forEach((t=>{void 0===r.Metadata&&(r.Metadata={}),t.startsWith("x-amz-meta-")&&(r.Metadata[t.substring(11)]=e.headers[t])}));const n=e.body;return r.Body=n,Promise.resolve(r)})(e,t)}}});const{PassThrough:Yp}=S.default;const{constants:Qp}=C.default,{promisify:eh}=A.default,th=eh(S.default.pipeline);class rh extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function nh(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:r}=t,n=(e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n="buffer"===r;let o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);const i=new Yp({objectMode:o});r&&i.setEncoding(r);let a=0;const s=[];return i.on("data",(e=>{s.push(e),o?a=s.length:a+=e.length})),i.getBufferedValue=()=>t?s:n?Buffer.concat(s,a):s.join(""),i.getBufferedLength=()=>a,i})(t);return await new Promise(((t,o)=>{const i=e=>{e&&n.getBufferedLength()<=Qp.MAX_LENGTH&&(e.bufferedData=n.getBufferedValue()),o(e)};(async()=>{try{await th(e,n),t()}catch(e){i(e)}})(),n.on("data",(()=>{n.getBufferedLength()>r&&i(new rh)}))})),n.getBufferedValue()}var oh=nh,ih=(e,t)=>nh(e,{...t,encoding:"buffer"}),ah=(e,t)=>nh(e,{...t,array:!0}),sh=rh;oh.buffer=ih,oh.array=ah,oh.MaxBufferError=sh;var uh=Object.freeze(Object.assign(Object.create(null),oh,{default:oh,buffer:ih,array:ah,MaxBufferError:sh}));exports.handler=async e=>{const t=b.default;let r;const n=m.default,o=w.default,{now:i,log:a}=an(t.logLambdaExecutionTimes),s=i();if(r=vn(e)?await hn({event:e,manifest:t,prerenderManifest:n,routesManifest:o}):await pn({event:e,manifest:t,prerenderManifest:n,routesManifest:o}),r.hasOwnProperty("status")){!function(e,t,r){if(e=F(e,r),t.headers)for(const n of r.headers)if($(e,n.source))for(const e of n.headers)if(e.key&&e.value){const r=e.key.toLowerCase();t.headers[r]=[{key:r,value:e.value}]}}(e.Records[0].cf.request.uri,r,o)}r.headers&&function(e){for(const t in e)nn(t)&&delete e[t]}(r.headers);return a("handler execution time",s,i()),r};
